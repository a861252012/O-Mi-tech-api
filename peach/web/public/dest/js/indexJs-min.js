/*! cross - v0.1.2 - 2018-02-05 */!function(a){var b="object"==typeof exports&&exports,c="object"==typeof module&&module&&module.exports==b&&module,d="object"==typeof global&&global;d.global!==d&&d.window!==d||(a=d);var e=function(a){this.message=a};e.prototype=new Error,e.prototype.name="InvalidCharacterError";var f=function(a){throw new e(a)},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/[\t\n\f\r ]/g,i=function(a){a=String(a).replace(h,"");var b=a.length;b%4==0&&(a=a.replace(/==?$/,""),b=a.length),(b%4==1||/[^+a-zA-Z0-9\/]/.test(a))&&f("Invalid character: the string to be decoded is not correctly encoded.");for(var c,d,e=0,i="",j=-1;++j<b;)d=g.indexOf(a.charAt(j)),c=e%4?64*c+d:d,e++%4&&(i+=String.fromCharCode(255&c>>(-2*e&6)));return i},j=function(a){a=String(a),/[^\0-\xFF]/.test(a)&&f("The string to be encoded contains characters outside of the Latin1 range.");for(var b,c,d,e,h=a.length%3,i="",j=-1,k=a.length-h;++j<k;)b=a.charCodeAt(j)<<16,c=a.charCodeAt(++j)<<8,d=a.charCodeAt(++j),e=b+c+d,i+=g.charAt(e>>18&63)+g.charAt(e>>12&63)+g.charAt(e>>6&63)+g.charAt(63&e);return 2==h?(b=a.charCodeAt(j)<<8,c=a.charCodeAt(++j),e=b+c,i+=g.charAt(e>>10)+g.charAt(e>>4&63)+g.charAt(e<<2&63)+"="):1==h&&(e=a.charCodeAt(j),i+=g.charAt(e>>2)+g.charAt(e<<4&63)+"=="),i},k={encode:j,decode:i,version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return k});else if(b&&!b.nodeType)if(c)c.exports=k;else for(var l in k)k.hasOwnProperty(l)&&(b[l]=k[l]);else a.base64=k}(this);var rankPanelTmp=['<div class="personContent-top clearfix">','<img class="personImg" src="#{headimg}" alt="" />','<div class="per-content">','<div class="per-content-title" clearfix">','<span class="per-name">#{nickname}</span>',"</div>",'<div class="per-hostid">#{hostId}</div>','<div class="per-icon">',"#{badge}","#{lvRich}","#{richMark}","</div>",'<div class="per-des">#{description}</div>',"</div>","</div>",'<div class="personContent-middle clearfix">','<span class="per-info">#{sex} | #{age} | #{starname} | #{procity}</span>',"#{isLive}",'<a href="#{space_url}" target="_blank" class="personLink">TA的空间</a>',"</div>",'<div class="personContent-bottom clearfix">','<div class="per-handle">',"#{attention}","</div>",'<a href="#{room_url}/#{rid}/h5" target="_blank" class="btn btn-red per-video-btn">进入房间</a>',"</div>"].join(""),favoriteHandle=function(a){var b=a.target.find(".per-fav-btn"),c=b.find("span");parseInt(a.checkatten,10)?(c.text("已关注"),b.data("fav","1")):(c.text("关注"),b.data("fav","0")),favoriteBtnSub(a)},favoriteBtnSub=function(a){var b,c=a.target.find(".per-fav-btn"),d=c.find("span");c.on("click",function(){var e=parseInt(c.data("fav"),10),f=1;return f=0==e?1:2,User.isLogin()?(b&&4!=b.readyState&&b.abort(),void(b=$.ajax({url:"/focus",type:"GET",dataType:"json",data:{pid:a.uid,ret:f},success:function(a){1==a.status?e?(d.text("关注"),c.data("fav","0")):(d.text("已关注"),c.data("fav","1"),User.flashUserInfo()):$.tips(a.msg)},error:function(a){}}))):void alert("请登录后再关注")})},getPanelData=function(a,b){a.find(".panel-hover").off("click"),a.on("mouseenter",".panel-hover",function(){var a=this;$(a).find(".personContent-top").length||$.ajax({type:"GET",url:"/majax/getfidinfo",data:{uid:$(a).attr("rel"),atten:!0},dataType:"json",success:function(c){if(c.ret){if(0==c.info.sex?c.info.sex="女":c.info.sex="男",3==c.info.roled?(c.info.hostId="(主播ID："+c.info.uid+")",c.info.richMark='<span class="hotListImg AnchorLevel'+c.info.lv_exp+'"></span>',c.info.lvRich=""):(c.info.hostId="",c.info.richMark="",c.info.lvRich=""),c.info.badge=0==c.info.vip?0==c.info.icon_id?"":'<span class="per-badge badge badge'+c.info.icon_id+'"></span>':'<span class="hotListImg basicLevel'+c.info.vip+'"></span>',3==c.info.roled)switch(Number(c.info.live_status)){case 0:c.info.isLive="<span class='per-live per-live-nl'>休息</span>";break;case 1:c.info.isLive="<span class='per-live per-live-ol'>直播</span>";break;default:c.info.isLive=""}3==c.info.roled?c.info.attention='<i class="per-fav"></i><a href="javascript:void(0)" class="per-fav-btn" data-fav="" title="点击关注"><span class="per-fav-btn-title">关注</span></a>':c.info.attention="",c.info.uid==User.UID?c.info.attention="":c.info.attention,c.info.room_url="";var d=Utility.template(rankPanelTmp,c.info);$(a).find(".personContent").html(d),3!=c.info.roled&&($(a).find(".per-video-btn").remove(),$(a).find(".personLink").remove()),$(a).find(".personLoading").remove(),c.info.target=$(a),favoriteHandle(c.info),b&&b(c)}},error:function(){window.console}})})};Array.prototype.each=function(a){a=a||Function.K;for(var b=[],c=Array.prototype.slice.call(arguments,1),d=0;d<this.length;d++){var e=a.apply(this,[this[d],d].concat(c));null!=e&&b.push(e)}return b},Array.prototype.uniquelize=function(){for(var a=new Array,b=0;b<this.length;b++)a.contains(this[b])||a.push(this[b]);return a},Array.prototype.contains=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return!0;return!1},Array.complement=function(a,b){return Array.minus(Array.union(a,b),Array.intersect(a,b))},Array.intersect=function(a,b){return a.uniquelize().each(function(a){return b.contains(a)?a:null})},Array.minus=function(a,b){return a.uniquelize().each(function(a){return b.contains(a)?null:a})},Array.union=function(a,b){return a.concat(b).uniquelize()};var RoomTicket=function(){this.init=function(){this.bindTicketRoomEvent()},this.bindTicketRoomEvent=function(){var a=this;$(document).on("click",".ticketRoom",function(b){b.preventDefault();var c=$(this),d={ordTitle:c.find(".username").text(),ordDuration:c.data("duration"),ordPoints:c.data("points"),ordStartTime:c.data("starttime"),ordEndTime:c.data("endtime"),ordRoomId:c.data("roomid"),ordOneToManyId:c.data("onetomany")};a.showBuyTicketDialog(d)})},this.showBuyTicketDialog=function(a){for(var b=a.ordTitle,c=Number(a.ordDuration)/60,d=a.ordPoints,e=a.ordStartTime,f=a.ordEndTime,g=a.ordRoomId,h=a.ordOneToManyId,i=!1,j=0;j<User.MY_TICKET.length;j++)if(User.MY_TICKET[j].id==h){i=!0;break}if(i)return void $.dialog({title:"温馨提示",content:"您已经有该房间门票",ok:function(){location.href="/"+g+"/h5"},okValue:"立即进入",cancel:function(){},cancelValue:"稍后再去"}).show();var k="<div class='ordDialog'><div class='ordDialogContent'><h4>精彩表演，房间爆满</h4><h4>客官快快买票进入吧！</h4><p>主播昵称："+b+"<br/>直播时长："+c+"分钟</br>入场费用："+d+"钻</br>开播时间："+e+"<br/>结束时间："+f+'</p></div><div class=\'ordDialogBottom\'><button type="button" class="btn btnTicketEnter" autofocus="" >立即进入</button><button type="button" class="btn-leave btnTicketLeave" >狠心离开</button></div></div>',l=function(){window.OpenAPI?window.open(window.OpenAPI.link.pay):location.href="/charge/order"},m=function(){window.OpenAPI?window.parent.close():o.remove()},n=!window.OpenAPI,o=$.dialog({title:"精彩一对多",content:k,closeButtonDisplay:n,cancelTextBtn:!0}),p=$.dialog({title:"一对多房间购票",content:"正在通讯，请稍等片刻...",cancel:function(){},cancelValue:"关闭",cancelDisplay:!1});o.show(),$(document).off("click",".btnTicketEnter"),$(document).on("click",".btnTicketEnter",function(){var a=$(this);p.show(),window.OpenAPI||o.remove(),a.prop("disabled",!0),$.ajax({url:"/member/makeUpOneToMore",type:"POST",dataType:"json",data:{rid:g,onetomore:h},success:function(b){p.remove(),1==b.status?$.dialog({title:"通知",content:"购买成功，立即观看！",closeButtonDisplay:!1,ok:function(){location.href="/"+g+"/h5"},okValue:"立即观看"}).show():b.cmd&&"topupTip"==b.cmd?$.dialog({title:"提示",content:b.msg,closeButtonDisplay:!1,okValue:"立即充值",ok:function(){l()},cancelValue:"狠心离开",cancel:function(){}}).show():(a.prop("disabled",!1),$.tips(b.msg))},error:function(){a.prop("disabled",!1),p.remove(),$.tips("购买失败，请联系客服。")}})}),$(document).off("click",".btnTicketLeave"),$(document).on("click",".btnTicketLeave",function(){m()})},this.init()},RoomPwd=function(){var a,b=this,c=0;this.init=function(){var a=window.currentVideo.roomId;if(window.currentVideo.isPassword){if(a==User.UID)return void(location.href="/"+User.UID+Config.liveMode);b.showPwdDialog(a)}},this.setRoomId=function(a){c=a},this.getRoomId=function(){return c},this.showPwdDialog=function(a){var c=['<div class="m-form">','<div class="m-form-item">','<input type="text" style="display:none;">','<input type="password" style="display:none;">','<label for="pwdRoom">房间密码：</label>','<input type="password" class="txt" id="pwdRoom" />',"</div>",'<div class="m-form-item">','<label for="pwdRoomCode">验证码：</label>','<input type="text" class="txt txt-short" id="pwdRoomCode" />','<img src="" alt="验证码" id="pwdRoomCodeImg" class="s-code-img" />','<a href="javascript:void(0);" class="change-roomcode m-form-tip J-change-scode">换一换</a>',"</div>",'<div class="m-form-item">','<span id="pwdRoomTips"></span>',"</div>","</div>"].join(""),d=$.dialog({title:"密码房间",content:c,width:400,onshow:function(){var a=this,b=new Captcha;b.flashCaptcha($("#pwdRoomCodeImg")),$(".change-roomcode").on("click",function(){b.flashCaptcha($("#pwdRoomCodeImg"))}),$("#pwdRoom").passwordInput("#pwdRoomTips"),$("#pwdRoom, #pwdRoomCode").on("keyup",function(b){if(13==b.keyCode){if(1==$("#pwdRoomCode").length&&$("#pwdRoomCode").val().length<=0)return void $("#pwdRoomTips").text("请输入验证码。");a.ok(),a.remove()}})},ok:function(){return $("#pwdRoom").trigger("keyup"),0==$.trim($("#pwdRoomTips").text()).length&&void b.roomPwdAjaxSet({data:{roomid:a,password:$("#pwdRoom").val(),captcha:$("#pwdRoomCode").val()},successCallback:function(b){1==b.code?location.href="/"+a+Config.liveMode:$.tips(b.msg)}})},okValue:"确定"});d.show()},this.roomPwdAjaxSet=function(b){var c={data:{},successCallback:function(){}},d=$.extend(!0,c,b);a&&4!=a.readyState&&a.abort(),$.ajax({url:"/checkroompwd",data:d.data,dataType:"json",type:"POST",success:function(a){d.successCallback&&d.successCallback(a)},error:function(){$.tips("请求超时。")}})},this.afterPwdSuccess=function(){},this.init()},RoomTimeCount=function(){this.timeCost=parseInt(window.currentVideo.timeCost,10),this.roomId=window.currentVideo.roomId;var a=function(a){return $.dialog({title:"温馨提示",content:"您的余额不足"+a.timeCostLimited+"钻石，需要充值才可以进入喔。",ok:function(){location.href="/charge/order"},cancel:function(){},okValue:"充值",cancelValue:"狠心离开"})},b=function(b){var c=b.timeCost,d="<p>您即将进入的是时长房间！</p><p>收费标准："+c+"钻石/分钟</p>";b.vip>0&&b.discount<10&&(c=Math.ceil(b.timeCost*b.discount/10),d=d+'<p style="color:red">您是'+b.vipName+" , 享受折扣："+b.discount+"折， "+c+"钻石/分钟。贵族专享更高折扣哦。</p>");var e=3*c;return $.dialog({title:"温馨提示",content:d,ok:function(){var c=this;User.POINTS<e?a({timeCostLimited:e}).show():$.ajax({url:"/setinroomstat",type:"get",dataType:"json",data:{roomid:b.roomId},success:function(a){1==a.code?location.href="/"+b.roomId+Config.liveMode:(c.close(),$.tips(a.msg+"<p>进入时长房间失败，请联系客服。</p>"))},error:function(a){}})},cancel:function(){},okValue:"确定进入",cancelValue:"狠心离开"})};this.showComfirm=function(){if(this.timeCost=parseInt(window.currentVideo.timeCost,10),this.roomId=window.currentVideo.roomId,this.roomId==User.UID)return void(location.href="/"+this.roomId+Config.liveMode);var a=this.timeCost,c=this.roomId;$.ajax({url:"/getTimeCountRoomDiscountInfo",type:"get",dataType:"json",success:function(d){1==d.code?b({timeCost:a,roomId:c,vip:d.info.vip,vipName:d.info.vipName,discount:d.info.discount}).show():$.tips(d.msg)},error:function(a){}})}};!function(a){var b=!0;a.flexslider=function(c,d){var e=a(c);e.vars=a.extend({},a.flexslider.defaults,d);var f,g=e.vars.namespace,h=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,i=("ontouchstart"in window||h||window.DocumentTouch&&document instanceof DocumentTouch)&&e.vars.touch,j="click touchend MSPointerUp keyup",k="",l="vertical"===e.vars.direction,m=e.vars.reverse,n=e.vars.itemWidth>0,o="fade"===e.vars.animation,p=""!==e.vars.asNavFor,q={};a.data(c,"flexslider",e),q={init:function(){e.animating=!1,e.currentSlide=parseInt(e.vars.startAt?e.vars.startAt:0,10),isNaN(e.currentSlide)&&(e.currentSlide=0),e.animatingTo=e.currentSlide,e.atEnd=0===e.currentSlide||e.currentSlide===e.last,e.containerSelector=e.vars.selector.substr(0,e.vars.selector.search(" ")),e.slides=a(e.vars.selector,e),e.container=a(e.containerSelector,e),e.count=e.slides.length,e.syncExists=a(e.vars.sync).length>0,"slide"===e.vars.animation&&(e.vars.animation="swing"),e.prop=l?"top":"marginLeft",e.args={},e.manualPause=!1,e.stopped=!1,e.started=!1,e.startTimeout=null,e.transitions=!e.vars.video&&!o&&e.vars.useCSS&&function(){var a=document.createElement("div"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return e.pfx=b[c].replace("Perspective","").toLowerCase(),e.prop="-"+e.pfx+"-transform",!0;return!1}(),e.ensureAnimationEnd="",""!==e.vars.controlsContainer&&(e.controlsContainer=a(e.vars.controlsContainer).length>0&&a(e.vars.controlsContainer)),""!==e.vars.manualControls&&(e.manualControls=a(e.vars.manualControls).length>0&&a(e.vars.manualControls)),""!==e.vars.customDirectionNav&&(e.customDirectionNav=2===a(e.vars.customDirectionNav).length&&a(e.vars.customDirectionNav)),e.vars.randomize&&(e.slides.sort(function(){return Math.round(Math.random())-.5}),e.container.empty().append(e.slides)),e.doMath(),e.setup("init"),e.vars.controlNav&&q.controlNav.setup(),e.vars.directionNav&&q.directionNav.setup(),e.vars.keyboard&&(1===a(e.containerSelector).length||e.vars.multipleKeyboard)&&a(document).bind("keyup",function(a){var b=a.keyCode;if(!e.animating&&(39===b||37===b)){var c=39===b?e.getTarget("next"):37===b&&e.getTarget("prev");e.flexAnimate(c,e.vars.pauseOnAction)}}),e.vars.mousewheel&&e.bind("mousewheel",function(a,b,c,d){a.preventDefault();var f=b<0?e.getTarget("next"):e.getTarget("prev");e.flexAnimate(f,e.vars.pauseOnAction)}),e.vars.pausePlay&&q.pausePlay.setup(),e.vars.slideshow&&e.vars.pauseInvisible&&q.pauseInvisible.init(),e.vars.slideshow&&(e.vars.pauseOnHover&&e.hover(function(){e.manualPlay||e.manualPause||e.pause()},function(){e.manualPause||e.manualPlay||e.stopped||e.play()}),e.vars.pauseInvisible&&q.pauseInvisible.isHidden()||(e.vars.initDelay>0?e.startTimeout=setTimeout(e.play,e.vars.initDelay):e.play())),p&&q.asNav.setup(),i&&e.vars.touch&&q.touch(),(!o||o&&e.vars.smoothHeight)&&a(window).bind("resize orientationchange focus",q.resize),e.find("img").attr("draggable","false"),setTimeout(function(){e.vars.start(e)},200)},asNav:{setup:function(){e.asNav=!0,e.animatingTo=Math.floor(e.currentSlide/e.move),e.currentItem=e.currentSlide,e.slides.removeClass(g+"active-slide").eq(e.currentItem).addClass(g+"active-slide"),h?(c._slider=e,e.slides.each(function(){var b=this;b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",function(a){a.preventDefault(),a.currentTarget._gesture&&a.currentTarget._gesture.addPointer(a.pointerId)},!1),b.addEventListener("MSGestureTap",function(b){b.preventDefault();var c=a(this),d=c.index();a(e.vars.asNavFor).data("flexslider").animating||c.hasClass("active")||(e.direction=e.currentItem<d?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction,!1,!0,!0))})})):e.slides.on(j,function(b){b.preventDefault();var c=a(this),d=c.index(),f=c.offset().left-a(e).scrollLeft();f<=0&&c.hasClass(g+"active-slide")?e.flexAnimate(e.getTarget("prev"),!0):a(e.vars.asNavFor).data("flexslider").animating||c.hasClass(g+"active-slide")||(e.direction=e.currentItem<d?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){e.manualControls?q.controlNav.setupManual():q.controlNav.setupPaging()},setupPaging:function(){var b,c,d="thumbnails"===e.vars.controlNav?"control-thumbs":"control-paging",f=1;if(e.controlNavScaffold=a('<ol class="'+g+"control-nav "+g+d+'"></ol>'),e.pagingCount>1)for(var h=0;h<e.pagingCount;h++){c=e.slides.eq(h),void 0===c.attr("data-thumb-alt")&&c.attr("data-thumb-alt","");var i=""!==c.attr("data-thumb-alt")?i=' alt="'+c.attr("data-thumb-alt")+'"':"";if(b="thumbnails"===e.vars.controlNav?'<img src="'+c.attr("data-thumb")+'"'+i+"/>":'<a href="#">'+f+"</a>","thumbnails"===e.vars.controlNav&&!0===e.vars.thumbCaptions){var l=c.attr("data-thumbcaption");""!==l&&void 0!==l&&(b+='<span class="'+g+'caption">'+l+"</span>")}e.controlNavScaffold.append("<li>"+b+"</li>"),f++}e.controlsContainer?a(e.controlsContainer).append(e.controlNavScaffold):e.append(e.controlNavScaffold),q.controlNav.set(),q.controlNav.active(),e.controlNavScaffold.delegate("a, img",j,function(b){if(b.preventDefault(),""===k||k===b.type){var c=a(this),d=e.controlNav.index(c);c.hasClass(g+"active")||(e.direction=d>e.currentSlide?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction))}""===k&&(k=b.type),q.setToClearWatchedEvent()})},setupManual:function(){e.controlNav=e.manualControls,q.controlNav.active(),e.controlNav.bind(j,function(b){if(b.preventDefault(),""===k||k===b.type){var c=a(this),d=e.controlNav.index(c);c.hasClass(g+"active")||(d>e.currentSlide?e.direction="next":e.direction="prev",e.flexAnimate(d,e.vars.pauseOnAction))}""===k&&(k=b.type),q.setToClearWatchedEvent()})},set:function(){var b="thumbnails"===e.vars.controlNav?"img":"a";e.controlNav=a("."+g+"control-nav li "+b,e.controlsContainer?e.controlsContainer:e)},active:function(){e.controlNav.removeClass(g+"active").eq(e.animatingTo).addClass(g+"active")},update:function(b,c){e.pagingCount>1&&"add"===b?e.controlNavScaffold.append(a('<li><a href="#">'+e.count+"</a></li>")):1===e.pagingCount?e.controlNavScaffold.find("li").remove():e.controlNav.eq(c).closest("li").remove(),q.controlNav.set(),e.pagingCount>1&&e.pagingCount!==e.controlNav.length?e.update(c,b):q.controlNav.active()}},directionNav:{setup:function(){var b=a('<ul class="'+g+'direction-nav"><li class="'+g+'nav-prev"><a class="'+g+'prev" href="#">'+e.vars.prevText+'</a></li><li class="'+g+'nav-next"><a class="'+g+'next" href="#">'+e.vars.nextText+"</a></li></ul>");e.customDirectionNav?e.directionNav=e.customDirectionNav:e.controlsContainer?(a(e.controlsContainer).append(b),e.directionNav=a("."+g+"direction-nav li a",e.controlsContainer)):(e.append(b),e.directionNav=a("."+g+"direction-nav li a",e)),q.directionNav.update(),e.directionNav.bind(j,function(b){b.preventDefault();var c;""!==k&&k!==b.type||(c=a(this).hasClass(g+"next")?e.getTarget("next"):e.getTarget("prev"),e.flexAnimate(c,e.vars.pauseOnAction)),""===k&&(k=b.type),q.setToClearWatchedEvent()})},update:function(){var a=g+"disabled";1===e.pagingCount?e.directionNav.addClass(a).attr("tabindex","-1"):e.vars.animationLoop?e.directionNav.removeClass(a).removeAttr("tabindex"):0===e.animatingTo?e.directionNav.removeClass(a).filter("."+g+"prev").addClass(a).attr("tabindex","-1"):e.animatingTo===e.last?e.directionNav.removeClass(a).filter("."+g+"next").addClass(a).attr("tabindex","-1"):e.directionNav.removeClass(a).removeAttr("tabindex")}},pausePlay:{setup:function(){var b=a('<div class="'+g+'pauseplay"><a href="#"></a></div>');e.controlsContainer?(e.controlsContainer.append(b),e.pausePlay=a("."+g+"pauseplay a",e.controlsContainer)):(e.append(b),e.pausePlay=a("."+g+"pauseplay a",e)),q.pausePlay.update(e.vars.slideshow?g+"pause":g+"play"),e.pausePlay.bind(j,function(b){b.preventDefault(),""!==k&&k!==b.type||(a(this).hasClass(g+"pause")?(e.manualPause=!0,e.manualPlay=!1,e.pause()):(e.manualPause=!1,e.manualPlay=!0,e.play())),""===k&&(k=b.type),q.setToClearWatchedEvent()})},update:function(a){"play"===a?e.pausePlay.removeClass(g+"pause").addClass(g+"play").html(e.vars.playText):e.pausePlay.removeClass(g+"play").addClass(g+"pause").html(e.vars.pauseText)}},touch:function(){function a(a){a.stopPropagation(),e.animating?a.preventDefault():(e.pause(),c._gesture.addPointer(a.pointerId),w=0,j=l?e.h:e.w,p=Number(new Date),i=n&&m&&e.animatingTo===e.last?0:n&&m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:n&&e.currentSlide===e.last?e.limit:n?(e.itemW+e.vars.itemMargin)*e.move*e.currentSlide:m?(e.last-e.currentSlide+e.cloneOffset)*j:(e.currentSlide+e.cloneOffset)*j)}function b(a){a.stopPropagation();var b=a.target._slider;if(b){var d=-a.translationX,e=-a.translationY;return w+=l?e:d,k=w,t=l?Math.abs(w)<Math.abs(-d):Math.abs(w)<Math.abs(-e),a.detail===a.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){c._gesture.stop()}):void((!t||Number(new Date)-p>500)&&(a.preventDefault(),!o&&b.transitions&&(b.vars.animationLoop||(k=w/(0===b.currentSlide&&w<0||b.currentSlide===b.last&&w>0?Math.abs(w)/j+2:1)),b.setProps(i+k,"setTouch"))))}}function d(a){a.stopPropagation();var b=a.target._slider;if(b){if(b.animatingTo===b.currentSlide&&!t&&null!==k){var c=m?-k:k,d=c>0?b.getTarget("next"):b.getTarget("prev");b.canAdvance(d)&&(Number(new Date)-p<550&&Math.abs(c)>50||Math.abs(c)>j/2)?b.flexAnimate(d,b.vars.pauseOnAction):o||b.flexAnimate(b.currentSlide,b.vars.pauseOnAction,!0)}f=null,g=null,k=null,i=null,w=0}}var f,g,i,j,k,p,q,r,s,t=!1,u=0,v=0,w=0;h?(c.style.msTouchAction="none",c._gesture=new MSGesture,c._gesture.target=c,c.addEventListener("MSPointerDown",a,!1),c._slider=e,c.addEventListener("MSGestureChange",b,!1),c.addEventListener("MSGestureEnd",d,!1)):(q=function(a){e.animating?a.preventDefault():(window.navigator.msPointerEnabled||1===a.touches.length)&&(e.pause(),j=l?e.h:e.w,p=Number(new Date),u=a.touches[0].pageX,v=a.touches[0].pageY,i=n&&m&&e.animatingTo===e.last?0:n&&m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:n&&e.currentSlide===e.last?e.limit:n?(e.itemW+e.vars.itemMargin)*e.move*e.currentSlide:m?(e.last-e.currentSlide+e.cloneOffset)*j:(e.currentSlide+e.cloneOffset)*j,f=l?v:u,g=l?u:v,c.addEventListener("touchmove",r,!1),c.addEventListener("touchend",s,!1))},r=function(a){u=a.touches[0].pageX,v=a.touches[0].pageY,k=l?f-v:f-u,t=l?Math.abs(k)<Math.abs(u-g):Math.abs(k)<Math.abs(v-g);var b=500;(!t||Number(new Date)-p>b)&&(a.preventDefault(),!o&&e.transitions&&(e.vars.animationLoop||(k/=0===e.currentSlide&&k<0||e.currentSlide===e.last&&k>0?Math.abs(k)/j+2:1),e.setProps(i+k,"setTouch")))},s=function(a){if(c.removeEventListener("touchmove",r,!1),e.animatingTo===e.currentSlide&&!t&&null!==k){var b=m?-k:k,d=b>0?e.getTarget("next"):e.getTarget("prev");e.canAdvance(d)&&(Number(new Date)-p<550&&Math.abs(b)>50||Math.abs(b)>j/2)?e.flexAnimate(d,e.vars.pauseOnAction):o||e.flexAnimate(e.currentSlide,e.vars.pauseOnAction,!0)}c.removeEventListener("touchend",s,!1),f=null,g=null,k=null,i=null},c.addEventListener("touchstart",q,!1))},resize:function(){!e.animating&&e.is(":visible")&&(n||e.doMath(),o?q.smoothHeight():n?(e.slides.width(e.computedW),e.update(e.pagingCount),e.setProps()):l?(e.viewport.height(e.h),e.setProps(e.h,"setTotal")):(e.vars.smoothHeight&&q.smoothHeight(),e.newSlides.width(e.computedW),e.setProps(e.computedW,"setTotal")))},smoothHeight:function(a){if(!l||o){var b=o?e:e.viewport;a?b.animate({height:e.slides.eq(e.animatingTo).innerHeight()},a).css("overflow","visible"):b.innerHeight(e.slides.eq(e.animatingTo).innerHeight())}},sync:function(b){var c=a(e.vars.sync).data("flexslider"),d=e.animatingTo;switch(b){case"animate":c.flexAnimate(d,e.vars.pauseOnAction,!1,!0);break;case"play":c.playing||c.asNav||c.play();break;case"pause":c.pause()}},uniqueID:function(b){return b.filter("[id]").add(b.find("[id]")).each(function(){var b=a(this);b.attr("id",b.attr("id")+"_clone")}),b},pauseInvisible:{visProp:null,init:function(){var a=q.pauseInvisible.getHiddenProp();if(a){var b=a.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(b,function(){q.pauseInvisible.isHidden()?e.startTimeout?clearTimeout(e.startTimeout):e.pause():e.started?e.play():e.vars.initDelay>0?setTimeout(e.play,e.vars.initDelay):e.play()})}},isHidden:function(){var a=q.pauseInvisible.getHiddenProp();return!!a&&document[a]},getHiddenProp:function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(f),f=setTimeout(function(){k=""},3e3)}},e.flexAnimate=function(b,c,d,f,h){if(e.vars.animationLoop||b===e.currentSlide||(e.direction=b>e.currentSlide?"next":"prev"),p&&1===e.pagingCount&&(e.direction=e.currentItem<b?"next":"prev"),!e.animating&&(e.canAdvance(b,h)||d)&&e.is(":visible")){if(p&&f){var j=a(e.vars.asNavFor).data("flexslider");if(e.atEnd=0===b||b===e.count-1,j.flexAnimate(b,!0,!1,!0,h),e.direction=e.currentItem<b?"next":"prev",j.direction=e.direction,Math.ceil((b+1)/e.visible)-1===e.currentSlide||0===b)return e.currentItem=b,e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),!1;e.currentItem=b,e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),b=Math.floor(b/e.visible)}if(e.animating=!0,e.animatingTo=b,c&&e.pause(),e.vars.before(e),e.syncExists&&!h&&q.sync("animate"),e.vars.controlNav&&q.controlNav.active(),n||e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),e.atEnd=0===b||b===e.last,e.vars.directionNav&&q.directionNav.update(),b===e.last&&(e.vars.end(e),e.vars.animationLoop||e.pause()),o)i?(e.slides.eq(e.currentSlide).css({opacity:0,zIndex:1,display:"none"}),e.slides.eq(b).css({opacity:1,zIndex:2,display:"block"}),e.wrapup(t)):(e.slides.eq(e.currentSlide).css({zIndex:1,display:"none"}).animate({opacity:0},e.vars.animationSpeed,e.vars.easing),e.slides.eq(b).css({zIndex:2,display:"block"}).animate({opacity:1},e.vars.animationSpeed,e.vars.easing,e.wrapup));else{var k,r,s,t=l?e.slides.filter(":first").height():e.computedW;n?(k=e.vars.itemMargin,s=(e.itemW+k)*e.move*e.animatingTo,r=s>e.limit&&1!==e.visible?e.limit:s):r=0===e.currentSlide&&b===e.count-1&&e.vars.animationLoop&&"next"!==e.direction?m?(e.count+e.cloneOffset)*t:0:e.currentSlide===e.last&&0===b&&e.vars.animationLoop&&"prev"!==e.direction?m?0:(e.count+1)*t:m?(e.count-1-b+e.cloneOffset)*t:(b+e.cloneOffset)*t,e.setProps(r,"",e.vars.animationSpeed),e.transitions?(e.vars.animationLoop&&e.atEnd||(e.animating=!1,e.currentSlide=e.animatingTo),e.container.unbind("webkitTransitionEnd transitionend"),e.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(e.ensureAnimationEnd),e.wrapup(t)}),clearTimeout(e.ensureAnimationEnd),e.ensureAnimationEnd=setTimeout(function(){e.wrapup(t)},e.vars.animationSpeed+100)):e.container.animate(e.args,e.vars.animationSpeed,e.vars.easing,function(){e.wrapup(t)})}e.vars.smoothHeight&&q.smoothHeight(e.vars.animationSpeed)}},e.wrapup=function(a){o||n||(0===e.currentSlide&&e.animatingTo===e.last&&e.vars.animationLoop?e.setProps(a,"jumpEnd"):e.currentSlide===e.last&&0===e.animatingTo&&e.vars.animationLoop&&e.setProps(a,"jumpStart")),e.animating=!1,e.currentSlide=e.animatingTo,e.vars.after(e)},e.animateSlides=function(){!e.animating&&b&&e.flexAnimate(e.getTarget("next"))},e.pause=function(){clearInterval(e.animatedSlides),e.animatedSlides=null,e.playing=!1,e.vars.pausePlay&&q.pausePlay.update("play"),e.syncExists&&q.sync("pause")},e.play=function(){e.playing&&clearInterval(e.animatedSlides),e.animatedSlides=e.animatedSlides||setInterval(e.animateSlides,e.vars.slideshowSpeed),e.started=e.playing=!0,e.vars.pausePlay&&q.pausePlay.update("pause"),e.syncExists&&q.sync("play")},e.stop=function(){e.pause(),e.stopped=!0},e.canAdvance=function(a,b){var c=p?e.pagingCount-1:e.last;return!!b||(!(!p||e.currentItem!==e.count-1||0!==a||"prev"!==e.direction)||(!p||0!==e.currentItem||a!==e.pagingCount-1||"next"===e.direction)&&(!(a===e.currentSlide&&!p)&&(!!e.vars.animationLoop||(!e.atEnd||0!==e.currentSlide||a!==c||"next"===e.direction)&&(!e.atEnd||e.currentSlide!==c||0!==a||"next"!==e.direction))))},e.getTarget=function(a){return e.direction=a,"next"===a?e.currentSlide===e.last?0:e.currentSlide+1:0===e.currentSlide?e.last:e.currentSlide-1},e.setProps=function(a,b,c){var d=function(){var c=a?a:(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo,d=function(){if(n)return"setTouch"===b?a:m&&e.animatingTo===e.last?0:m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:e.animatingTo===e.last?e.limit:c;switch(b){case"setTotal":return m?(e.count-1-e.currentSlide+e.cloneOffset)*a:(e.currentSlide+e.cloneOffset)*a;case"setTouch":return m?a:a;case"jumpEnd":return m?a:e.count*a;case"jumpStart":return m?e.count*a:a;default:return a}}();return d*-1+"px"}();e.transitions&&(d=l?"translate3d(0,"+d+",0)":"translate3d("+d+",0,0)",c=void 0!==c?c/1e3+"s":"0s",e.container.css("-"+e.pfx+"-transition-duration",c),e.container.css("transition-duration",c)),e.args[e.prop]=d,(e.transitions||void 0===c)&&e.container.css(e.args),e.container.css("transform",d)},e.setup=function(b){if(o)e.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===b&&(i?e.slides.css({opacity:0,display:"none",webkitTransition:"opacity "+e.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(e.currentSlide).css({opacity:1,zIndex:2,display:"block"}):0==e.vars.fadeFirstSlide?e.slides.css({opacity:0,display:"none",zIndex:1}).eq(e.currentSlide).css({zIndex:2,display:"block"}).css({opacity:1}):e.slides.css({opacity:0,display:"none",zIndex:1}).eq(e.currentSlide).css({zIndex:2,display:"block"}).animate({opacity:1},e.vars.animationSpeed,e.vars.easing)),e.vars.smoothHeight&&q.smoothHeight();else{var c,d;"init"===b&&(e.viewport=a('<div class="'+g+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(e).append(e.container),e.cloneCount=0,e.cloneOffset=0,m&&(d=a.makeArray(e.slides).reverse(),e.slides=a(d),e.container.empty().append(e.slides))),e.vars.animationLoop&&!n&&(e.cloneCount=2,e.cloneOffset=1,"init"!==b&&e.container.find(".clone").remove(),e.container.append(q.uniqueID(e.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(q.uniqueID(e.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),e.newSlides=a(e.vars.selector,e),c=m?e.count-1-e.currentSlide+e.cloneOffset:e.currentSlide+e.cloneOffset,l&&!n?(e.container.height(200*(e.count+e.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){e.newSlides.css({display:"block"}),e.doMath(),e.viewport.height(e.h),e.setProps(c*e.h,"init")},"init"===b?100:0)):(e.container.width(200*(e.count+e.cloneCount)+"%"),e.setProps(c*e.computedW,"init"),setTimeout(function(){e.doMath(),e.newSlides.css({width:e.computedW,marginRight:e.computedM,"float":"left",display:"block"}),e.vars.smoothHeight&&q.smoothHeight()},"init"===b?100:0))}n||e.slides.removeClass(g+"active-slide").eq(e.currentSlide).addClass(g+"active-slide"),e.vars.init(e)},e.doMath=function(){var a=e.slides.first(),b=e.vars.itemMargin,c=e.vars.minItems,d=e.vars.maxItems;e.w=void 0===e.viewport?e.width():e.viewport.width(),e.h=a.height(),e.boxPadding=a.outerWidth()-a.width(),n?(e.itemT=e.vars.itemWidth+b,e.itemM=b,e.minW=c?c*e.itemT:e.w,e.maxW=d?d*e.itemT-b:e.w,e.itemW=e.minW>e.w?(e.w-b*(c-1))/c:e.maxW<e.w?(e.w-b*(d-1))/d:e.vars.itemWidth>e.w?e.w:e.vars.itemWidth,e.visible=Math.floor(e.w/e.itemW),e.move=e.vars.move>0&&e.vars.move<e.visible?e.vars.move:e.visible,e.pagingCount=Math.ceil((e.count-e.visible)/e.move+1),e.last=e.pagingCount-1,e.limit=1===e.pagingCount?0:e.vars.itemWidth>e.w?e.itemW*(e.count-1)+b*(e.count-1):(e.itemW+b)*e.count-e.w-b):(e.itemW=e.w,e.itemM=b,e.pagingCount=e.count,e.last=e.count-1),e.computedW=e.itemW-e.boxPadding,e.computedM=e.itemM},e.update=function(a,b){e.doMath(),n||(a<e.currentSlide?e.currentSlide+=1:a<=e.currentSlide&&0!==a&&(e.currentSlide-=1),e.animatingTo=e.currentSlide),e.vars.controlNav&&!e.manualControls&&("add"===b&&!n||e.pagingCount>e.controlNav.length?q.controlNav.update("add"):("remove"===b&&!n||e.pagingCount<e.controlNav.length)&&(n&&e.currentSlide>e.last&&(e.currentSlide-=1,e.animatingTo-=1),q.controlNav.update("remove",e.last))),e.vars.directionNav&&q.directionNav.update()},e.addSlide=function(b,c){var d=a(b);e.count+=1,e.last=e.count-1,l&&m?void 0!==c?e.slides.eq(e.count-c).after(d):e.container.prepend(d):void 0!==c?e.slides.eq(c).before(d):e.container.append(d),e.update(c,"add"),e.slides=a(e.vars.selector+":not(.clone)",e),e.setup(),e.vars.added(e)},e.removeSlide=function(b){var c=isNaN(b)?e.slides.index(a(b)):b;e.count-=1,e.last=e.count-1,isNaN(b)?a(b,e.slides).remove():l&&m?e.slides.eq(e.last).remove():e.slides.eq(b).remove(),e.doMath(),
e.update(c,"remove"),e.slides=a(e.vars.selector+":not(.clone)",e),e.setup(),e.vars.removed(e)},q.init()},a(window).blur(function(a){b=!1}).focus(function(a){b=!0}),a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},a.fn.flexslider=function(b){if(void 0===b&&(b={}),"object"==typeof b)return this.each(function(){var c=a(this),d=b.selector?b.selector:".slides > li",e=c.find(d);1===e.length&&b.allowOneSlide===!1||0===e.length?(e.fadeIn(400),b.start&&b.start(c)):void 0===c.data("flexslider")&&new a.flexslider(this,b)});var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"stop":c.stop();break;case"next":c.flexAnimate(c.getTarget("next"),!0);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),!0);break;default:"number"==typeof b&&c.flexAnimate(b,!0)}}}(jQuery),!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("DPlayer",[],b):"object"==typeof exports?exports.DPlayer=b():a.DPlayer=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/",b(b.s=1)}([function(a,b,c){"use strict";a.exports={secondToTime:function(a){var b=function(a){return a<10?"0"+a:""+a},c=parseInt(a/60),d=parseInt(a-60*c);return b(c)+":"+b(d)},getElementViewLeft:function(a){var b=a.offsetLeft,c=a.offsetParent,d=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==c&&c!==a;)b+=c.offsetLeft,c=c.offsetParent;else for(;null!==c;)b+=c.offsetLeft,c=c.offsetParent;return b-d},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(a){var b=a.left,c=void 0===b?0:b,d=a.top,e=void 0===d?0:d;this.isFirefox?(document.documentElement.scrollLeft=c,document.documentElement.scrollTop=e):window.scrollTo(c,e)},isMobile:/mobile/i.test(window.navigator.userAgent),isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(a,b){localStorage.setItem(a,b)},get:function(a){return localStorage.getItem(a)}}}},function(a,b,c){"use strict";a.exports=c(2)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c(3);var g=c(0),h=d(g),i=c(4),j=d(i),k=c(6),l=d(k),m=c(7),n=d(m),o=c(8),p=d(o),q=c(9),r=d(q),s=c(10),t=d(s),u=c(11),v=d(u),w=c(12),x=d(w),y=c(13),z=d(y),A=c(14),B=d(A),C=0,D=[],E=function(){function a(b){var c=this;e(this,a),this.options=(0,j["default"])(b),this.options.container.classList.add("dplayer"),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new l["default"](this.options.lang).tran,this.icons=new p["default"](this.options),this.events=new v["default"],this.user=new z["default"](this),this.container=this.options.container,this.options.danmaku||this.container.classList.add("dplayer-no-danmaku"),g.isMobile&&this.container.classList.add("dplayer-mobile"),this.container.innerHTML=n["default"].main(this.options,C,this.tran,this.icons);var d={};d.volumeBar=this.container.getElementsByClassName("dplayer-volume-bar-inner")[0],d.playedBar=this.container.getElementsByClassName("dplayer-played")[0],d.loadedBar=this.container.getElementsByClassName("dplayer-loaded")[0];var f=this.container.getElementsByClassName("dplayer-bar-wrap")[0],i=this.container.getElementsByClassName("dplayer-bar-time")[0],k=void 0;if(this.updateBar=function(a,b,c){b=b>0?b:0,b=b<1?b:1,d[a+"Bar"].style[c]=100*b+"%"},document.addEventListener("click",function(){c.focus=!1},!0),this.container.addEventListener("click",function(){c.focus=!0},!0),this.options.danmaku&&(this.danmaku=new r["default"]({container:this.container.getElementsByClassName("dplayer-danmaku")[0],opacity:this.user.get("opacity"),callback:function(){c.container.getElementsByClassName("dplayer-danloading")[0].style.display="none",c.options.autoplay&&!g.isMobile?c.play():g.isMobile&&c.pause()},error:function(a){c.notice(a)},apiBackend:this.options.apiBackend,borderColor:this.options.theme,height:this.arrow?24:30,time:function(){return c.video.currentTime},unlimited:this.user.get("unlimited"),api:{id:this.options.danmaku.id,address:this.options.danmaku.api,token:this.options.danmaku.token,maximum:this.options.danmaku.maximum,addition:this.options.danmaku.addition,user:this.options.danmaku.user},events:this.events})),this.arrow=this.container.offsetWidth<=500,this.arrow){var m=document.createElement("style");m.innerHTML=".dplayer .dplayer-danmaku{font-size:18px}",document.head.appendChild(m)}this.video=this.container.getElementsByClassName("dplayer-video-current")[0],this.bezel=this.container.getElementsByClassName("dplayer-bezel-icon")[0],this.bezel.addEventListener("animationend",function(){c.bezel.classList.remove("dplayer-bezel-transition")}),this.playButton=this.container.getElementsByClassName("dplayer-play-icon")[0],this.paused=!0,this.playButton.addEventListener("click",function(){c.toggle()});var o=this.container.getElementsByClassName("dplayer-video-wrap")[0],q=this.container.getElementsByClassName("dplayer-controller-mask")[0];if(g.isMobile){var s=function(){c.container.classList.contains("dplayer-hide-controller")?c.container.classList.remove("dplayer-hide-controller"):c.container.classList.add("dplayer-hide-controller")};o.addEventListener("click",s),q.addEventListener("click",s)}else o.addEventListener("click",function(){c.toggle()}),q.addEventListener("click",function(){c.toggle()});var t=0,u=0,w=!1;window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var y=function(){c.checkLoading=setInterval(function(){u=c.video.currentTime,w||u!==t||c.video.paused||(c.container.classList.add("dplayer-loading"),w=!0),w&&u>t&&!c.video.paused&&(c.container.classList.remove("dplayer-loading"),w=!1),t=u},100)},A=function(){clearInterval(c.checkLoading)};this.playedTime=!1,this.animationFrame=function(){c.playedTime&&(c.updateBar("played",c.video.currentTime/c.video.duration,"width"),c.container.getElementsByClassName("dplayer-ptime")[0].innerHTML=h["default"].secondToTime(c.video.currentTime)),window.requestAnimationFrame(c.animationFrame)},window.requestAnimationFrame(this.animationFrame),this.setTime=function(a){a?(c[a+"Time"]=!0,"played"===a&&y()):(c.playedTime=!0,y())},this.clearTime=function(a){a?(c[a+"Time"]=!1,"played"===a&&A()):(c.playedTime=!1,A())},this.options.video.thumbnails&&this.initThumbnails(),this.isTimeTipsShow=!0,this.mouseHandler=this.mouseHandler(f,i).bind(this),f.addEventListener("mousemove",this.mouseHandler),f.addEventListener("mouseenter",this.mouseHandler),f.addEventListener("mouseleave",this.mouseHandler);var B=function(a){var b=(a.clientX-h["default"].getElementViewLeft(f))/k;b=b>0?b:0,b=b<1?b:1,c.updateBar("played",b,"width"),c.container.getElementsByClassName("dplayer-ptime")[0].innerHTML=h["default"].secondToTime(b*c.video.duration)},E=function ka(a){document.removeEventListener("mouseup",ka),document.removeEventListener("mousemove",B);var b=(a.clientX-h["default"].getElementViewLeft(f))/k;b=b>0?b:0,b=b<1?b:1,c.updateBar("played",b,"width"),c.seek(parseFloat(d.playedBar.style.width)/100*c.video.duration),c.setTime()};f.addEventListener("mousedown",function(){k=f.clientWidth,c.clearTime(),document.addEventListener("mousemove",B),document.addEventListener("mouseup",E)});var F=this.container.getElementsByClassName("dplayer-volume")[0],G=this.container.getElementsByClassName("dplayer-volume-bar-wrap")[0],H=this.container.getElementsByClassName("dplayer-volume-bar")[0],I=this.container.getElementsByClassName("dplayer-volume-icon")[0].getElementsByClassName("dplayer-icon-content")[0];this.switchVolumeIcon=function(){c.volume()>=.95?I.innerHTML=c.icons.get("volume-up"):c.volume()>0?I.innerHTML=c.icons.get("volume-down"):I.innerHTML=c.icons.get("volume-off")};var J=function(a){var b=a||window.event,d=(b.clientX-h["default"].getElementViewLeft(H)-5.5)/35;c.volume(d)},K=function la(){document.removeEventListener("mouseup",la),document.removeEventListener("mousemove",J),F.classList.remove("dplayer-volume-active")};G.addEventListener("click",function(a){var b=a||window.event,d=(b.clientX-h["default"].getElementViewLeft(H)-5.5)/35;c.volume(d)}),G.addEventListener("mousedown",function(){document.addEventListener("mousemove",J),document.addEventListener("mouseup",K),F.classList.add("dplayer-volume-active")}),I.addEventListener("click",function(){c.video.muted?(c.video.muted=!1,c.switchVolumeIcon(),c.updateBar("volume",c.volume(),"width")):(c.video.muted=!0,I.innerHTML=c.icons.get("volume-off"),c.updateBar("volume",0,"width"))}),this.hideTime=0;var L=function(){c.container.classList.remove("dplayer-hide-controller"),clearTimeout(c.hideTime),c.hideTime=setTimeout(function(){c.video.played.length&&!c.disableHideController&&(c.container.classList.add("dplayer-hide-controller"),Q(),ba())},2e3)};g.isMobile||(this.container.addEventListener("mousemove",L),this.container.addEventListener("click",L));var M=n["default"].setting(this.tran,this.icons),N=this.container.getElementsByClassName("dplayer-setting-icon")[0],O=this.container.getElementsByClassName("dplayer-setting-box")[0],P=this.container.getElementsByClassName("dplayer-mask")[0];O.innerHTML=M.original;var Q=function(){O.classList.contains("dplayer-setting-box-open")&&(O.classList.remove("dplayer-setting-box-open"),P.classList.remove("dplayer-mask-show"),setTimeout(function(){O.classList.remove("dplayer-setting-box-narrow"),O.innerHTML=M.original,U()},300)),c.disableHideController=!1},R=function(){c.disableHideController=!0,O.classList.add("dplayer-setting-box-open"),P.classList.add("dplayer-mask-show")};P.addEventListener("click",function(){Q()}),N.addEventListener("click",function(){R()}),this.loop=this.options.loop;var S=this.user.get("danmaku");S||this.danmaku&&this.danmaku.hide();var T=this.user.get("unlimited"),U=function(){var a=c.container.getElementsByClassName("dplayer-setting-loop")[0],b=a.getElementsByClassName("dplayer-toggle-setting-input")[0];b.checked=c.loop,a.addEventListener("click",function(){b.checked=!b.checked,b.checked?c.loop=!0:c.loop=!1,Q()});var e=c.container.getElementsByClassName("dplayer-setting-showdan")[0],f=e.getElementsByClassName("dplayer-showdan-setting-input")[0];f.checked=S,e.addEventListener("click",function(){f.checked=!f.checked,f.checked?(S=!0,c.paused||c.danmaku.show()):(S=!1,c.danmaku.hide()),c.user.set("danmaku",S?1:0),Q()});var g=c.container.getElementsByClassName("dplayer-setting-danunlimit")[0],i=g.getElementsByClassName("dplayer-danunlimit-setting-input")[0];if(i.checked=T,g.addEventListener("click",function(){i.checked=!i.checked,i.checked?(T=!0,c.danmaku.unlimit(!0)):(T=!1,c.danmaku.unlimit(!1)),c.user.set("unlimited",T?1:0),Q()}),c.container.getElementsByClassName("dplayer-setting-speed")[0].addEventListener("click",function(){O.classList.add("dplayer-setting-box-narrow"),O.innerHTML=M.speed;for(var a=O.getElementsByClassName("dplayer-setting-speed-item"),b=0;b<a.length;b++)!function(b){a[b].addEventListener("click",function(){c.video.playbackRate=a[b].dataset.speed,Q()})}(b)}),c.danmaku){d.danmakuBar=c.container.getElementsByClassName("dplayer-danmaku-bar-inner")[0];var j=c.container.getElementsByClassName("dplayer-danmaku-bar-wrap")[0],k=c.container.getElementsByClassName("dplayer-danmaku-bar")[0],l=c.container.getElementsByClassName("dplayer-setting-danmaku")[0];c.on("danmaku_opacity",function(a){c.updateBar("danmaku",a,"width"),c.user.set("opacity",a)}),c.danmaku.opacity(c.user.get("opacity"));var m=function(a){var b=a||window.event,d=(b.clientX-h["default"].getElementViewLeft(k))/130;d=d>0?d:0,d=d<1?d:1,c.danmaku.opacity(d)},n=function o(){document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",m),l.classList.remove("dplayer-setting-danmaku-active")};j.addEventListener("click",function(a){var b=a||window.event,d=(b.clientX-h["default"].getElementViewLeft(k))/130;d=d>0?d:0,d=d<1?d:1,c.danmaku.opacity(d)}),j.addEventListener("mousedown",function(){document.addEventListener("mousemove",m),document.addEventListener("mouseup",n),l.classList.add("dplayer-setting-danmaku-active")})}};U(),1!==this.video.duration&&(this.container.getElementsByClassName("dplayer-dtime")[0].innerHTML=this.video.duration?h["default"].secondToTime(this.video.duration):"00:00"),this.danmaku||(this.options.autoplay&&!g.isMobile?this.play():g.isMobile&&this.pause());var V=this.container.getElementsByClassName("dplayer-controller")[0],W=this.container.getElementsByClassName("dplayer-comment-input")[0],X=this.container.getElementsByClassName("dplayer-comment-icon")[0],Y=this.container.getElementsByClassName("dplayer-comment-setting-icon")[0],Z=this.container.getElementsByClassName("dplayer-comment-setting-box")[0],$=this.container.getElementsByClassName("dplayer-send-icon")[0],_=function(){Z.classList.contains("dplayer-comment-setting-open")&&Z.classList.remove("dplayer-comment-setting-open")},aa=function(){Z.classList.contains("dplayer-comment-setting-open")?Z.classList.remove("dplayer-comment-setting-open"):Z.classList.add("dplayer-comment-setting-open")},ba=function(){V.classList.contains("dplayer-controller-comment")&&(V.classList.remove("dplayer-controller-comment"),P.classList.remove("dplayer-mask-show"),c.container.classList.remove("dplayer-show-controller"),_(),c.disableHideController=!1)},ca=function(){c.disableHideController=!0,V.classList.contains("dplayer-controller-comment")||(V.classList.add("dplayer-controller-comment"),P.classList.add("dplayer-mask-show"),c.container.classList.add("dplayer-show-controller"),W.focus())};P.addEventListener("click",function(){ba()}),X.addEventListener("click",function(){ca()}),Y.addEventListener("click",function(){aa()});var da=this.container.getElementsByClassName("dplayer-comment-setting-color")[0];da.addEventListener("click",function(){if(da.querySelector("input:checked+span")){var a=da.querySelector("input:checked").value;Y.getElementsByClassName("dplayer-fill")[0].style.fill=a,W.style.color=a,$.getElementsByClassName("dplayer-fill")[0].style.fill=a}});var ea=function(){return W.blur(),W.value.replace(/^\s+|\s+$/g,"")?void c.danmaku.send({text:W.value,color:c.container.querySelector(".dplayer-comment-setting-color input:checked").value,type:c.container.querySelector(".dplayer-comment-setting-type input:checked").value},function(){W.value="",ba()}):void c.notice(c.tran("Please input danmaku content!"))};W.addEventListener("click",function(){_()}),W.addEventListener("keydown",function(a){13===(a||window.event).keyCode&&ea()}),$.addEventListener("click",ea),this.fullScreen=new x["default"](this),this.container.getElementsByClassName("dplayer-full-icon")[0].addEventListener("click",function(){c.fullScreen.toggle("browser")}),this.container.getElementsByClassName("dplayer-full-in-icon")[0].addEventListener("click",function(){c.fullScreen.toggle("web")});var fa=function(a){if(c.focus){var b=document.activeElement.tagName.toUpperCase(),d=document.activeElement.getAttribute("contenteditable");if("INPUT"!==b&&"TEXTAREA"!==b&&""!==d&&"true"!==d){var e=a||window.event,f=void 0;switch(e.keyCode){case 32:e.preventDefault(),c.toggle();break;case 37:e.preventDefault(),c.seek(c.video.currentTime-5),L();break;case 39:e.preventDefault(),c.seek(c.video.currentTime+5),L();break;case 38:e.preventDefault(),f=c.volume()+.1,c.volume(f);break;case 40:e.preventDefault(),f=c.volume()-.1,c.volume(f)}}}};this.options.hotkey&&document.addEventListener("keydown",fa),document.addEventListener("keydown",function(a){switch((a||window.event).keyCode){case 27:c.fullScreen.isFullScreen("web")&&c.fullScreen.cancel("web")}});var ga=this.container.getElementsByClassName("dplayer-menu")[0];if(this.container.addEventListener("contextmenu",function(a){var b=a||window.event;b.preventDefault(),ga.classList.add("dplayer-menu-show");var d=c.container.getBoundingClientRect(),e=b.clientX-d.left,f=b.clientY-d.top;e+ga.offsetWidth>=d.width?(ga.style.right=d.width-e+"px",ga.style.left="initial"):(ga.style.left=b.clientX-c.container.getBoundingClientRect().left+"px",ga.style.right="initial"),f+ga.offsetHeight>=d.height?(ga.style.bottom=d.height-f+"px",ga.style.top="initial"):(ga.style.top=b.clientY-c.container.getBoundingClientRect().top+"px",ga.style.bottom="initial"),P.classList.add("dplayer-mask-show"),c.events.trigger("contextmenu_show"),P.addEventListener("click",function(){P.classList.remove("dplayer-mask-show"),ga.classList.remove("dplayer-menu-show"),c.events.trigger("contextmenu_hide")})}),this.options.video.quality&&this.container.getElementsByClassName("dplayer-quality-list")[0].addEventListener("click",function(a){a.target.classList.contains("dplayer-quality-item")&&c.switchQuality(a.target.dataset.index)}),this.options.screenshot){var ha=this.container.getElementsByClassName("dplayer-camera-icon")[0];ha.addEventListener("click",function(){var a=document.createElement("canvas");a.width=c.video.videoWidth,a.height=c.video.videoHeight,a.getContext("2d").drawImage(c.video,0,0,a.width,a.height);var b=a.toDataURL();ha.href=b,ha.download="DPlayer.png",c.events.trigger("screenshot",b)})}if(this.options.subtitle){var ia=this.container.getElementsByClassName("dplayer-subtitle-icon")[0],ja=ia.getElementsByClassName("dplayer-icon-content")[0];this.events.on("subtitle_show",function(){ia.dataset.balloon=c.tran("Hide subtitle"),ja.style.opacity="",c.user.set("subtitle",1)}),this.events.on("subtitle_hide",function(){ia.dataset.balloon=c.tran("Show subtitle"),ja.style.opacity="0.4",c.user.set("subtitle",0)}),ia.addEventListener("click",function(){c.subtitle.toggle()})}this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),C++,D.push(this)}return f(a,[{key:"seek",value:function(a){a=Math.max(a,0),this.video.duration&&(a=Math.min(a,this.video.duration)),this.video.currentTime<a?this.notice(this.tran("FF")+" "+(a-this.video.currentTime).toFixed(0)+" "+this.tran("s")):this.video.currentTime>a&&this.notice(this.tran("REW")+" "+(this.video.currentTime-a).toFixed(0)+" "+this.tran("s")),this.video.currentTime=a,this.danmaku&&this.danmaku.seek(),this.updateBar("played",a/this.video.duration,"width")}},{key:"play",value:function(){if(this.paused=!1,this.video.paused&&(this.bezel.innerHTML=this.icons.get("play"),this.bezel.classList.add("dplayer-bezel-transition")),this.playButton.innerHTML=this.icons.get("pause"),this.video.play(),this.setTime(),this.container.classList.add("dplayer-playing"),this.danmaku&&this.danmaku.play(),this.options.mutex)for(var a=0;a<D.length;a++)this!==D[a]&&D[a].pause()}},{key:"pause",value:function(){this.paused=!0,this.container.classList.remove("dplayer-loading"),this.video.paused||(this.bezel.innerHTML=this.icons.get("pause"),this.bezel.classList.add("dplayer-bezel-transition")),this.ended=!1,this.playButton.innerHTML=this.icons.get("play"),this.video.pause(),this.clearTime(),this.container.classList.remove("dplayer-playing"),this.danmaku&&this.danmaku.pause()}},{key:"volume",value:function(a,b,c){if(a=parseFloat(a),!isNaN(a)){a=a>0?a:0,a=a<1?a:1,this.updateBar("volume",a,"width");var d=(100*a).toFixed(0)+"%";this.container.getElementsByClassName("dplayer-volume-bar-wrap")[0].dataset.balloon=d,b||this.user.set("volume",a),c||this.notice(this.tran("Volume")+" "+(100*a).toFixed(0)+"%"),this.video.volume=a,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}},{key:"toggle",value:function(){this.video.paused?this.play():this.pause()}},{key:"on",value:function(a,b){this.events.on(a,b)}},{key:"switchVideo",value:function(a,b){this.pause(),this.video.poster=a.pic?a.pic:"",this.video.src=a.url,this.initMSE(this.video,a.type||"auto"),b&&(this.container.getElementsByClassName("dplayer-danloading")[0].style.display="block",this.updateBar("played",0,"width"),this.updateBar("loaded",0,"width"),this.container.getElementsByClassName("dplayer-ptime")[0].innerHTML="00:00",this.container.getElementsByClassName("dplayer-danmaku")[0].innerHTML="",this.danmaku&&this.danmaku.reload({id:b.id,address:b.api,token:b.token,maximum:b.maximum,addition:b.addition,user:b.user}))}},{key:"initMSE",value:function(a,b){if(this.type=b,"auto"===this.type&&(/m3u8(#|\?|$)/i.exec(a.src)?this.type="hls":/.flv(#|\?|$)/i.exec(a.src)?this.type="flv":/.mpd(#|\?|$)/i.exec(a.src)?this.type="dash":this.type="normal"),"hls"===this.type&&Hls&&Hls.isSupported()){var c=new Hls;c.loadSource(a.src),c.attachMedia(a)}if("flv"===this.type&&flvjs&&flvjs.isSupported()){var d=flvjs.createPlayer({type:"flv",url:a.src});d.attachMediaElement(a),d.load()}"dash"===this.type&&dashjs&&dashjs.MediaPlayer().create().initialize(a,a.src,!1)}},{key:"initVideo",value:function(a,b){var c=this;this.initMSE(a,b),this.on("durationchange",function(){1!==a.duration&&(c.container.getElementsByClassName("dplayer-dtime")[0].innerHTML=h["default"].secondToTime(a.duration))}),this.on("progress",function(){var b=a.buffered.length?a.buffered.end(a.buffered.length-1)/a.duration:0;c.updateBar("loaded",b,"width")}),this.on("error",function(){c.tran&&c.notice&&c.notice(c.tran("This video fails to load"),-1)}),this.ended=!1,this.on("ended",function(){c.updateBar("played",1,"width"),c.loop?(c.seek(0),a.play()):(c.ended=!0,c.pause()),c.danmaku&&(c.danmaku.danIndex=0)}),this.on("play",function(){c.paused&&c.play()}),this.on("pause",function(){c.paused||c.pause()});for(var d=0;d<this.events.videoEvents.length;d++)!function(b){a.addEventListener(c.events.videoEvents[b],function(){c.events.trigger(c.events.videoEvents[b])})}(d);this.volume(this.user.get("volume"),!0,!0),this.options.subtitle&&(this.subtitle=new B["default"](this.container.getElementsByClassName("dplayer-subtitle")[0],this.video,this.options.subtitle,this.events),this.user.get("subtitle")||this.subtitle.hide())}},{key:"switchQuality",value:function(a){var b=this;if(this.qualityIndex!==a&&!this.switchingQuality){this.qualityIndex=a,this.switchingQuality=!0,this.quality=this.options.video.quality[a],this.container.getElementsByClassName("dplayer-quality-icon")[0].innerHTML=this.quality.name;var c=this.video.paused;this.video.pause();var d=n["default"].video(!1,null,this.options.screenshot,"auto",this.quality.url,this.options.subtitle),e=(new DOMParser).parseFromString(d,"text/html").body.firstChild,f=this.container.getElementsByClassName("dplayer-video-wrap")[0];f.insertBefore(e,f.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=e,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice(this.tran("Switching to")+" "+this.quality.name+" "+this.tran("quality"),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",function(){if(b.prevVideo){if(b.video.currentTime!==b.prevVideo.currentTime)return void b.seek(b.prevVideo.currentTime);f.removeChild(b.prevVideo),b.video.classList.add("dplayer-video-current"),c||b.video.play(),b.prevVideo=null,b.notice(b.tran("Switched to")+" "+b.quality.name+" "+b.tran("quality")),b.switchingQuality=!1,b.events.trigger("quality_end")}})}}},{key:"mouseHandler",value:function(a,b){var c=this,d=function(a){var b=0,c=0;do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a);return{top:b,left:c}};return function(e){if(c.video.duration){var f=e.clientX,g=d(a).left,i=f-g;if(!(i<0||i>a.offsetWidth)){var j=c.video.duration*(i/a.offsetWidth);switch(b.style.left=i-20+"px",e.type){case"mouseenter":c.thumbnails&&c.thumbnails.show();break;case"mousemove":c.thumbnails&&c.thumbnails.move(i),b.innerText=h["default"].secondToTime(j),c.timeTipsDisplay(!0,b);break;case"mouseleave":c.thumbnails&&c.thumbnails.hide(),c.timeTipsDisplay(!1,b)}}}}}},{key:"timeTipsDisplay",value:function(a,b){if(a){if(this.isTimeTipsShow)return;b.classList.remove("hidden"),this.isTimeTipsShow=!0}else{if(!this.isTimeTipsShow)return;b.classList.add("hidden"),this.isTimeTipsShow=!1}}},{key:"initThumbnails",value:function(){var a=this;this.thumbnails=new t["default"](this.container.getElementsByClassName("dplayer-bar-preview")[0],this.container.getElementsByClassName("dplayer-bar-wrap")[0].offsetWidth,this.options.video.thumbnails,this.events),this.on("loadedmetadata",function(){a.thumbnails.resize(160,90)})}},{key:"notice",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,e=this.container.getElementsByClassName("dplayer-notice")[0];e.innerHTML=a,e.style.opacity=d,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",a),this.noticeTime=setTimeout(function(){e.style.opacity=0,b.events.trigger("notice_hide")},c)}},{key:"resize",value:function(){this.danmaku&&this.danmaku.resize(),this.events.trigger("resize")}},{key:"destroy",value:function(){D.splice(D.indexOf(this),1),this.pause(),clearTimeout(this.hideTime),this.video.src="",this.container.innerHTML="",this.events.trigger("destroy");for(var a in this)this.hasOwnProperty(a)&&"paused"!==a&&delete this[a]}}]),a}();a.exports=E},function(a,b){},function(a,b,c){"use strict";var d=c(5);a.exports=function(a){/mobile/i.test(window.navigator.userAgent)&&(a.autoplay=!1);var b={container:a.element||document.getElementsByClassName("dplayer")[0],autoplay:!1,theme:"#fff",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,hotkey:!0,preload:"auto",volume:.7,apiBackend:d,video:{},icons:{play:["0 0 16 32","M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"],pause:["0 0 17 32","M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"],"volume-up":["0 0 21 32","M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"],"volume-down":["0 0 21 32","M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"],"volume-off":["0 0 21 32","M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"],loop:["0 0 32 32","M1.882 16.941c0 4.152 3.221 7.529 7.177 7.529v1.882c-4.996 0-9.060-4.222-9.060-9.412s4.064-9.412 9.060-9.412h7.96l-3.098-3.098 1.331-1.331 5.372 5.37-5.37 5.372-1.333-1.333 3.1-3.098h-7.962c-3.957 0-7.177 3.377-7.177 7.529zM22.94 7.529v1.882c3.957 0 7.177 3.377 7.177 7.529s-3.221 7.529-7.177 7.529h-7.962l3.098-3.098-1.331-1.331-5.37 5.37 5.372 5.372 1.331-1.331-3.1-3.1h7.96c4.998 0 9.062-4.222 9.062-9.412s-4.064-9.412-9.060-9.412z"],full:["0 0 32 33","M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"],"full-in":["0 0 32 33","M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"],setting:["0 0 32 28","M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"],
right:["0 0 32 32","M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"],comment:["0 0 32 32","M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"],"comment-off":["0 0 32 32","M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"],send:["0 0 32 32","M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"],pallette:["0 0 32 32","M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"],camera:["0 0 32 32","M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"],subtitle:["0 0 32 32","M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"]},iconsColor:"#ffffff",contextmenu:[],jumpUrl:"",mutex:!0};for(var c in b)b.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=b[c]);return a.video&&!a.video.type&&(a.video.type="auto"),a.danmaku&&!a.danmaku.user&&(a.danmaku.user="DIYgod"),a.subtitle&&(!a.subtitle.type&&(a.subtitle.type="webvtt"),!a.subtitle.fontSize&&(a.subtitle.fontSize="20px"),!a.subtitle.bottom&&(a.subtitle.bottom="40px"),!a.subtitle.color&&(a.subtitle.color="#fff")),a.video.quality&&(a.video.url=[a.video.quality[a.video.defaultQuality].url]),a.lang&&(a.lang=a.lang.toLowerCase()),a.icons&&(a.icons=Object.assign({},b.icons,a.icons)),a.jumpUrl&&(a.jumpUrl=a.jumpUrl.toLowerCase()),a}},function(a,b,c){"use strict";var d=function(a,b,c,d,e){var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4===f.readyState){if(f.status>=200&&f.status<300||304===f.status){var a=JSON.parse(f.responseText);return 1!==a.code?d(f,a):c(f,a)}e(f)}},f.open(null!==b?"POST":"GET",a,!0),f.send(null!==b?JSON.stringify(b):null)};a.exports={send:function(a,b,c){d(a,b,function(a,b){c&&c()},function(a,b){alert(b.msg)},function(a){})},read:function(a,b){d(a,null,function(a,c){b(null,c.danmaku)},function(a,c){b({status:a.status,response:c})},function(a){b({status:a.status,response:null})})}}},function(a,b,c){"use strict";a.exports=function(a){var b=this;this.lang=a,this.tran=function(a){return d[b.lang]&&d[b.lang][a]?d[b.lang][a]:a}};var d={"zh-cn":{"Danmaku is loading":"弹幕加载中",Top:"顶部",Bottom:"底部",Rolling:"滚动","Input danmaku, hit Enter":"输入弹幕，回车发送","About author":"关于作者","DPlayer feedback":"播放器意见反馈","About DPlayer":"关于 DPlayer 播放器",Loop:"洗脑循环",Speed:"速度","Opacity for danmaku":"弹幕透明度",Normal:"正常","Please input danmaku content!":"要输入弹幕内容啊喂！","Set danmaku color":"设置弹幕颜色","Set danmaku type":"设置弹幕类型","Show danmaku":"显示弹幕","This video fails to load":"视频加载失败","Switching to":"正在切换至","Switched to":"已经切换至",quality:"画质",FF:"快进",REW:"快退","Unlimited danmaku":"海量弹幕","Send danmaku":"发送弹幕",Setting:"设置","Full screen":"全屏","Web full screen":"页面全屏",Send:"发送",Screenshot:"截图",s:"秒","Show subtitle":"显示字幕","Hide subtitle":"隐藏字幕",Volume:"音量"},"zh-tw":{"Danmaku is loading":"彈幕加載中",Top:"頂部",Bottom:"底部",Rolling:"滾動","Input danmaku, hit Enter":"輸入彈幕，Enter 發送","About author":"關於作者","DPlayer feedback":"播放器意見反饋","About DPlayer":"關於 DPlayer 播放器",Loop:"循環播放",Speed:"速度","Opacity for danmaku":"彈幕透明度",Normal:"正常","Please input danmaku content!":"請輸入彈幕内容啊！","Set danmaku color":"設置彈幕顏色","Set danmaku type":"設置彈幕類型","Show danmaku":"顯示彈幕","This video fails to load":"視頻加載失敗","Switching to":"正在切換至","Switched to":"已經切換至",quality:"畫質",FF:"快進",REW:"快退","Unlimited danmaku":"海量彈幕","Send danmaku":"發送彈幕",Setting:"設置","Full screen":"全屏","Web full screen":"頁面全屏",Send:"發送",Screenshot:"截圖",s:"秒","Show subtitle":"顯示字幕","Hide subtitle":"隱藏字幕",Volume:"音量"}}},function(a,b,c){"use strict";var d={main:function(a,b,c,e){return'<div class="dplayer-mask"></div><div class="dplayer-video-wrap">'+d.video(!0,a.video.pic,a.screenshot,a.preload,a.video.url,a.subtitle)+(a.logo?'<div class="dplayer-logo"><img src="'+a.logo+'"></div>':"")+'<div class="dplayer-danmaku" style="'+(a.danmaku?d.danmakumargin(a.danmaku.margin):"")+'"><div class="dplayer-danmaku-item dplayer-danmaku-item--demo"></div></div><div class="dplayer-subtitle"></div><div class="dplayer-bezel"><span class="dplayer-bezel-icon"></span>'+(a.danmaku?'<span class="dplayer-danloading">'+c("Danmaku is loading")+"</span>":"")+'<span class="diplayer-loading-icon"><svg height="100%" version="1.1" viewBox="0 0 22 22" width="100%"><svg x="7" y="1"><circle class="diplayer-loading-dot diplayer-loading-dot-0" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-1" cx="4" cy="4" r="2"></circle></svg><svg x="13" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-2" cx="4" cy="4" r="2"></circle></svg><svg x="11" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-3" cx="4" cy="4" r="2"></circle></svg><svg x="7" y="13"><circle class="diplayer-loading-dot diplayer-loading-dot-4" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="11"><circle class="diplayer-loading-dot diplayer-loading-dot-5" cx="4" cy="4" r="2"></circle></svg><svg x="1" y="7"><circle class="diplayer-loading-dot diplayer-loading-dot-6" cx="4" cy="4" r="2"></circle></svg><svg x="3" y="3"><circle class="diplayer-loading-dot diplayer-loading-dot-7" cx="4" cy="4" r="2"></circle></svg></svg></span></div></div><div class="dplayer-controller-mask"></div><div class="dplayer-controller"><div class="dplayer-icons dplayer-comment-box"><button class="dplayer-icon dplayer-comment-setting-icon" data-balloon="'+c("Setting")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("pallette")+'</span></button><div class="dplayer-comment-setting-box"><div class="dplayer-comment-setting-color"><div class="dplayer-comment-setting-title">'+c("Set danmaku color")+'</div><label><input type="radio" name="dplayer-danmaku-color-'+b+'" value="#fff" checked><span style="background: #fff;"></span></label><label><input type="radio" name="dplayer-danmaku-color-'+b+'" value="#e54256"><span style="background: #e54256"></span></label><label><input type="radio" name="dplayer-danmaku-color-'+b+'" value="#ffe133"><span style="background: #ffe133"></span></label><label><input type="radio" name="dplayer-danmaku-color-'+b+'" value="#64DD17"><span style="background: #64DD17"></span></label><label><input type="radio" name="dplayer-danmaku-color-'+b+'" value="#39ccff"><span style="background: #39ccff"></span></label><label><input type="radio" name="dplayer-danmaku-color-'+b+'" value="#D500F9"><span style="background: #D500F9"></span></label></div><div class="dplayer-comment-setting-type"><div class="dplayer-comment-setting-title">'+c("Set danmaku type")+'</div><label><input type="radio" name="dplayer-danmaku-type-'+b+'" value="top"><span>'+c("Top")+'</span></label><label><input type="radio" name="dplayer-danmaku-type-'+b+'" value="right" checked><span>'+c("Rolling")+'</span></label><label><input type="radio" name="dplayer-danmaku-type-'+b+'" value="bottom"><span>'+c("Bottom")+'</span></label></div></div><input class="dplayer-comment-input" type="text" placeholder="'+c("Input danmaku, hit Enter")+'" maxlength="30"><button class="dplayer-icon dplayer-send-icon" data-balloon="'+c("Send")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("send")+'</span></button></div><div class="dplayer-icons dplayer-icons-left"><button class="dplayer-icon dplayer-play-icon"><span class="dplayer-icon-content">'+e.get("play")+'</span></button><div class="dplayer-volume"><button class="dplayer-icon dplayer-volume-icon"><span class="dplayer-icon-content">'+e.get("volume-down")+'</span></button><div class="dplayer-volume-bar-wrap" data-balloon-pos="up"><div class="dplayer-volume-bar"><div class="dplayer-volume-bar-inner" style="background: '+a.theme+';"><span class="dplayer-thumb" style="background: '+a.theme+'"></span></div></div></div></div><span class="dplayer-time"><span class="dplayer-ptime">0:00</span> / <span class="dplayer-dtime">0:00</span></span></div><div class="dplayer-icons dplayer-icons-right">'+(a.video.quality?'<div class="dplayer-quality"><button class="dplayer-icon dplayer-quality-icon">'+a.video.quality[a.video.defaultQuality].name+'</button><div class="dplayer-quality-mask">'+d.qualityList(a.video.quality)+"</div></div>":"")+(a.screenshot?'<a href="#" class="dplayer-icon dplayer-camera-icon" data-balloon="'+c("Screenshot")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("camera")+"</span></a>":"")+'<div class="dplayer-comment"><button class="dplayer-icon dplayer-comment-icon" data-balloon="'+c("Send danmaku")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("comment")+"</span></button></div>"+(a.subtitle?'<div class="dplayer-subtitle-btn"><button class="dplayer-icon dplayer-subtitle-icon" data-balloon="'+c("Hide subtitle")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("subtitle")+"</span></button></div>":"")+'<div class="dplayer-setting"><button class="dplayer-icon dplayer-setting-icon" data-balloon="'+c("Setting")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("setting")+'</span></button><div class="dplayer-setting-box"></div></div><div class="dplayer-full"><button class="dplayer-icon dplayer-full-in-icon" data-balloon="'+c("Web full screen")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("full-in")+'</span></button><button class="dplayer-icon dplayer-full-icon" data-balloon="'+c("Full screen")+'" data-balloon-pos="up"><span class="dplayer-icon-content">'+e.get("full")+'</span></button></div></div><div class="dplayer-bar-wrap"><div class="dplayer-bar-time hidden">00:00</div><div class="dplayer-bar-preview"></div><div class="dplayer-bar"><div class="dplayer-loaded" style="width: 0;"></div><div class="dplayer-played" style="width: 0; background: '+a.theme+'"><span class="dplayer-thumb" style="background: '+a.theme+'"></span></div></div></div></div>'+d.contextmenuList(a.contextmenu,c)+'<div class="dplayer-notice"></div><a href="'+a.jumpUrl+'" target="_blank" class="enter-btn">进入直播<i class="fa fa-angle-right"></i></a>'},danmakumargin:function(a){var b="";if(a)for(var c in a)b+=c+":"+a[c]+";";return b},contextmenuList:function(a,b){for(var c='<div class="dplayer-menu">',d=0;d<a.length;d++)c+='<div class="dplayer-menu-item"><a target="_blank" href="'+a[d].link+'">'+b(a[d].text)+"</a></div>";return c+="</div>"},qualityList:function(a){for(var b='<div class="dplayer-quality-list">',c=0;c<a.length;c++)b+='<div class="dplayer-quality-item" data-index="'+c+'">'+a[c].name+"</div>";return b+="</div>"},video:function(a,b,c,d,e,f){var g=f&&"webvtt"===f.type;return'<video class="dplayer-video '+(a?'dplayer-video-current"':"")+'" '+(b?'poster="'+b+'"':"")+" webkit-playsinline playsinline "+(c||g?'crossorigin="anonymous"':"")+" "+(d?'preload="'+d+'"':"")+' src="'+e+'">'+(g?'<track kind="metadata" default src="'+f.url+'"></track>':"")+"</video>"},setting:function(a,b){return{original:'<div class="dplayer-setting-item dplayer-setting-speed"><span class="dplayer-label">'+a("Speed")+'</span><div class="dplayer-toggle">'+b.get("right")+'</div></div><div class="dplayer-setting-item dplayer-setting-loop"><span class="dplayer-label">'+a("Loop")+'</span><div class="dplayer-toggle"><input class="dplayer-toggle-setting-input" type="checkbox" name="dplayer-toggle"><label for="dplayer-toggle"></label></div></div><div class="dplayer-setting-item dplayer-setting-showdan"><span class="dplayer-label">'+a("Show danmaku")+'</span><div class="dplayer-toggle"><input class="dplayer-showdan-setting-input" type="checkbox" name="dplayer-toggle-dan"><label for="dplayer-toggle-dan"></label></div></div><div class="dplayer-setting-item dplayer-setting-danunlimit"><span class="dplayer-label">'+a("Unlimited danmaku")+'</span><div class="dplayer-toggle"><input class="dplayer-danunlimit-setting-input" type="checkbox" name="dplayer-toggle-danunlimit"><label for="dplayer-toggle-danunlimit"></label></div></div><div class="dplayer-setting-item dplayer-setting-danmaku"><span class="dplayer-label">'+a("Opacity for danmaku")+'</span><div class="dplayer-danmaku-bar-wrap"><div class="dplayer-danmaku-bar"><div class="dplayer-danmaku-bar-inner"><span class="dplayer-thumb"></span></div></div></div></div>',speed:'<div class="dplayer-setting-speed-item" data-speed="0.5"><span class="dplayer-label">0.5</span></div><div class="dplayer-setting-speed-item" data-speed="0.75"><span class="dplayer-label">0.75</span></div><div class="dplayer-setting-speed-item" data-speed="1"><span class="dplayer-label">'+a("Normal")+'</span></div><div class="dplayer-setting-speed-item" data-speed="1.25"><span class="dplayer-label">1.25</span></div><div class="dplayer-setting-speed-item" data-speed="1.5"><span class="dplayer-label">1.5</span></div><div class="dplayer-setting-speed-item" data-speed="2"><span class="dplayer-label">2</span></div>'}}};a.exports=d},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.icons=b.icons,this.iconColor=b.iconsColor}return e(a,[{key:"get",value:function(a){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+(this.icons[a][2]||"100%")+'" height="'+(this.icons[a][2]||"100%")+'" version="1.1" viewBox="'+this.icons[a][0]+'"><path class="dplayer-fill" style="fill:'+this.iconColor+'" d="'+this.icons[a][1]+'" id="dplayer-'+a+'"></path></svg>'}}]),a}();a.exports=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){d(this,a),this.options=b,this.container=this.options.container,this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.dan=[],this.showing=!0,this._opacity=this.options.opacity,this.events=this.options.events,this.unlimited=this.options.unlimited,this._measure(""),this.load()}return f(a,[{key:"load",value:function(){var a=this,b=void 0;b=this.options.api.maximum?this.options.api.address+"?id="+this.options.api.id+"&max="+this.options.api.maximum:this.options.api.address+"?id="+this.options.api.id;var c=(this.options.api.addition||[]).slice(0);c.push(b),this.events&&this.events.trigger("danmaku_load_start",c),this._readAllEndpoints(c,function(b){a.dan=[].concat.apply([],b).sort(function(a,b){return a.time-b.time}),window.requestAnimationFrame(function(){a.frame()}),a.options.callback(),a.events&&a.events.trigger("danmaku_load_end")})}},{key:"reload",value:function(a){this.options.api=a,this.dan=[],this.clear(),this.load()}},{key:"_readAllEndpoints",value:function(a,b){for(var c=this,d=[],e=0,f=0;f<a.length;++f)this.options.apiBackend.read(a[f],function(f){return function(g,h){if(++e,g?(g.response?c.options.error(g.response.msg):c.options.error("Request was unsuccessful: "+g.status),d[f]=[]):d[f]=h,e===a.length)return b(d)}}(f))}},{key:"send",value:function(a,b){var c={token:this.options.api.token,player:this.options.api.id,author:this.options.api.user,time:this.options.time(),text:a.text,color:a.color,type:a.type};this.options.apiBackend.send(this.options.api.address,c,b),this.dan.splice(this.danIndex,0,c),this.danIndex++;var d={text:this.htmlEncode(c.text),color:c.color,type:c.type,border:"2px solid "+this.options.borderColor};this.draw(d),this.events&&this.events.trigger("danmaku_send",c)}},{key:"frame",value:function(){var a=this;if(this.dan.length&&!this.paused&&this.showing){for(var b=this.dan[this.danIndex],c=[];b&&this.options.time()>parseFloat(b.time);)c.push(b),b=this.dan[++this.danIndex];this.draw(c)}window.requestAnimationFrame(function(){a.frame()})}},{key:"opacity",value:function(a){if(void 0!==a){for(var b=this.container.getElementsByClassName("dplayer-danmaku-item"),c=0;c<b.length;c++)b[c].style.opacity=a;this._opacity=a,this.events&&this.events.trigger("danmaku_opacity",this._opacity)}return this._opacity}},{key:"draw",value:function(a){var b=this,c=this.options.height,d=this.container.offsetWidth,f=this.container.offsetHeight,g=parseInt(f/c),h=function(a){var c=a.offsetWidth||parseInt(a.style.width),d=a.getBoundingClientRect().right||b.container.getBoundingClientRect().right+c;return b.container.getBoundingClientRect().right-d},i=function(a){return(d+a)/5},j=function(a,c,f){for(var j=d/i(f),k=0;b.unlimited||k<g;k++){var l=function(e){var f=b.danTunnel[c][e+""];if(!f||!f.length)return b.danTunnel[c][e+""]=[a],a.addEventListener("animationend",function(){b.danTunnel[c][e+""].splice(0,1)}),{v:e%g};if("right"!==c)return"continue";for(var k=0;k<f.length;k++){var l=h(f[k])-10;if(l<=d-j*i(parseInt(f[k].style.width))||l<=0)break;if(k===f.length-1)return b.danTunnel[c][e+""].push(a),a.addEventListener("animationend",function(){b.danTunnel[c][e+""].splice(0,1)}),{v:e%g}}}(k);switch(l){case"continue":continue;default:if("object"===(void 0===l?"undefined":e(l)))return l.v}}return-1};"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]);for(var k=document.createDocumentFragment(),l=0;l<a.length;l++)!function(e){a[e].type||(a[e].type="right"),a[e].color||(a[e].color="#fff");var f=document.createElement("div");f.classList.add("dplayer-danmaku-item"),f.classList.add("dplayer-danmaku-"+a[e].type),a[e].border?f.innerHTML='<span style="border:'+a[e].border+'">'+a[e].text+"</span>":f.innerHTML=a[e].text,f.style.opacity=b._opacity,f.style.color=a[e].color,f.addEventListener("animationend",function(){b.container.removeChild(f)});var g=b._measure(a[e].text),h=void 0;switch(a[e].type){case"right":h=j(f,a[e].type,g),h>=0&&(f.style.width=g+1+"px",f.style.top=c*h+"px",f.style.transform="translateX(-"+d+"px)");break;case"top":h=j(f,a[e].type),h>=0&&(f.style.top=c*h+"px");break;case"bottom":h=j(f,a[e].type),h>=0&&(f.style.bottom=c*h+"px")}h>=0&&(f.classList.add("dplayer-danmaku-move"),k.appendChild(f))}(l);return this.container.appendChild(k),k}},{key:"play",value:function(){this.paused=!1}},{key:"pause",value:function(){this.paused=!0}},{key:"_measure",value:function(a){if(!this.context){var b=getComputedStyle(this.container.getElementsByClassName("dplayer-danmaku-item")[0],null);this.context=document.createElement("canvas").getContext("2d"),this.context.font=b.getPropertyValue("font")}return this.context.measureText(a).width}},{key:"seek",value:function(){this.clear();for(var a=0;a<this.dan.length;a++){if(this.dan[a].time>=this.options.time()){this.danIndex=a;break}this.danIndex=this.dan.length}}},{key:"clear",value:function(){this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.options.container.innerHTML="",this.events&&this.events.trigger("danmaku_clear")}},{key:"htmlEncode",value:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2f;")}},{key:"resize",value:function(){for(var a=this.container.offsetWidth,b=this.container.getElementsByClassName("dplayer-danmaku-item"),c=0;c<b.length;c++)b[c].style.transform="translateX(-"+a+"px)"}},{key:"hide",value:function(){this.showing=!1,this.pause(),this.clear(),this.events&&this.events.trigger("danmaku_hide")}},{key:"show",value:function(){this.seek(),this.showing=!0,this.play(),this.events&&this.events.trigger("danmaku_show")}},{key:"unlimit",value:function(a){this.unlimited=a}}]),a}();a.exports=g},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e,f){d(this,a),this.container=b,this.width=c,this.container.style.backgroundImage="url('"+e+"')",this.events=f}return e(a,[{key:"resize",value:function(a,b){this.container.style.width=a+"px",this.container.style.height=b+"px",this.container.style.top=2-b+"px"}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(a){this.container.style.backgroundPosition="-"+160*(Math.ceil(a/this.width*100)-1)+"px 0",this.container.style.left=a-this.container.offsetWidth/2+"px"}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}]),a}();a.exports=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","danmaku_show","danmaku_hide","danmaku_clear","danmaku_loaded","danmaku_send","danmaku_opacity","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change"]}return e(a,[{key:"on",value:function(a,b){this.type(a)&&"function"==typeof b&&(this.events[a]||(this.events[a]=[]),this.events[a].push(b))}},{key:"trigger",value:function(a,b){if(this.events[a]&&this.events[a].length)for(var c=0;c<this.events[a].length;c++)this.events[a][c](b)}},{key:"type",value:function(a){return-1!==this.playerEvents.indexOf(a)?"player":-1!==this.videoEvents.indexOf(a)?"video":null}}]),a}();a.exports=f},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(a){return a&&a.__esModule?a:{"default":a}}(f),h=function(){function a(b){var c=this;d(this,a),this.player=b,this.player.events.on("webfullscreen",function(){c.player.resize()}),this.player.events.on("webfullscreen_cancel",function(){c.player.resize()});var e=function(){c.player.resize(),c.isFullScreen("browser")?c.player.events.trigger("fullscreen"):c.player.events.trigger("fullscreen_cancel")};this.player.container.addEventListener("fullscreenchange",e),this.player.container.addEventListener("mozfullscreenchange",e),this.player.container.addEventListener("webkitfullscreenchange",e)}return e(a,[{key:"isFullScreen",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;case"web":return this.player.container.classList.contains("dplayer-fulled")}}},{key:"request",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen&&this.player.video.webkitEnterFullscreen();break;case"web":this.player.container.classList.add("dplayer-fulled"),this.lastScrollPosition=g["default"].getScrollPosition(),document.body.classList.add("dplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}}},{key:"cancel",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser"){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();break;case"web":this.player.container.classList.remove("dplayer-fulled"),document.body.classList.remove("dplayer-web-fullscreen-fix"),g["default"].setScrollPosition(this.lastScrollPosition),this.player.events.trigger("webfullscreen_cancel")}}},{key:"toggle",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";this.isFullScreen(a)?this.cancel(a):this.request(a)}}]),a}();a.exports=h},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(a){return a&&a.__esModule?a:{"default":a}}(f),h=function(){function a(b){d(this,a),this.storageName={opacity:"dplayer-danmaku-opacity",volume:"dplayer-volume",unlimited:"dplayer-danmaku-unlimited",danmaku:"dplayer-danmaku-show",subtitle:"dplayer-subtitle-show"},this["default"]={opacity:.7,volume:b.options.volume||.7,unlimited:(b.options.danmaku&&b.options.danmaku.unlimited?1:0)||0,danmaku:1,subtitle:1},this.data={},this.init()}return e(a,[{key:"init",value:function(){for(var a in this.storageName){var b=this.storageName[a];this.data[a]=parseFloat(g["default"].storage.get(b)||this["default"][a])}}},{key:"get",value:function(a){return this.data[a]}},{key:"set",value:function(a,b){this.data[a]=b,g["default"].storage.set(this.storageName[a],b)}}]),a}();a.exports=h},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e,f){d(this,a),this.container=b,this.video=c,this.options=e,this.events=f,this.init()}return e(a,[{key:"init",value:function(){var a=this;if(this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]){var b=this.video.textTracks[0];b.oncuechange=function(){var c=b.activeCues[0];if(c){a.container.innerHTML="";var d=document.createElement("p");d.appendChild(c.getCueAsHTML()),a.container.appendChild(d)}else a.container.innerHTML="";a.events.trigger("subtitle_change")}}}},{key:"show",value:function(){this.container.classList.remove("dplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("dplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("dplayer-subtitle-hide")?this.show():this.hide()}}]),a}();a.exports=f}])});var hostAjax,arrayOnly=function(a,b){if(0==b.length)return!0;for(var c=0;c<b.length;c++)return a!=b[c]},randomString=function(){var a=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","Q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9");
seedLen=a.length;var b="";for(i=0;i<4;i++)j=Math.floor(Math.random()*seedLen),b+=a[j];return b},getItemData=function(a){var b={url:"",data:{},failText:"data fetch fail",successCallback:function(){}};$.extend(!0,b,a),hostAjax&&4!=hostAjax.readyState&&hostAjax.abort(),hostAjax=$.ajax({type:"GET",url:b.url,data:b.data,dataType:"json",success:function(a){b.successCallback&&b.successCallback(a),window.console},error:function(a){window.console}})},bindOrd=function(){var a=$(".ordRoom");a.on("click",function(a){a.preventDefault();var b=$(this),c=b.find("img").attr("src"),d=b.find(".title").text(),e=b.data("duration"),f=b.data("points"),g=b.data("starttime"),h=b.data("roomid"),i=b.data("appointstate");if("1"==i){var j="<div class='ordDialog'><img src="+c+" alt /><div class='ordDialogContent'><h4>"+d+"</h4><p>直播时长："+e+"</br>直播费用："+f+"钻</br>开播时间："+g+"</p></div></div>";$.dialog({title:"立即约会",content:j,ok:function(){reserveRoom(h)},okValue:"立即约会"}).show()}})},renderRankList=function(a){$.each(a,function(a,b){if(a.indexOf("rank_")>-1){for(var c="",d=0;d<b.length&&5!=d;d++){var e="",f="",g=!1,h="";a.indexOf("_exp_")>0&&(g=!0),g?h="rank-text-exp":e="undefined"==typeof b[d].vip||"0"==b[d].vip.toString()?0==b[d].icon_id?"":'<div class="rank-badge badge badge'+b[d].icon_id+'"></div>':'<div class="hotListImg basicLevel'+b[d].vip+'"></div>',b[d].headimg=b[d].headimg?window.IMG_PATH+"/"+b[d].headimg+"?w=80&h=80":cross.cdnPath+"/src/img/head_80.png",f=g?'<div class="rank-mark hotListImg AnchorLevel'+b[d].lv_exp+'"></div>':"",c+='<div class="rank-item panel-hover" rel="'+b[d].uid+'"><div class="rank-num">'+(d+1)+'.</div><div class="rank-item-des"><div class="rank-text '+h+'">'+b[d].username+'</div><div class="rank-item-inner">'+e+f+'</div></div><div class="personDiv" data-rel="'+b[d].uid+'"><div class="personContent clearfix"><img class="personLoading" src="'+Config.imagePath+'/loading.gif" /></div></div></div>'}$("#"+a).html(c)}})},searchHandle=function(){var a=$("#searchIpt"),b=$("#searchIptBtn"),c=function(){var b=a.val();""!=b&&(location.href="/search?nickname="+b)};b.on("click",function(){c()}),a.on("keyup",function(a){13==a.keyCode&&c()})},VideoList=function(){var a="<div class='m-load'></div>",b=this,c=[],d="";this.cat="all",this.pageCount=0,this.pageSize=31,this.pageNumber=25,this.renderIndexData=function(e,f,g){var h=[],i=[],j="";if(!f.rooms||0==f.rooms.length)return void $("#"+e[0].id).append('<div class="main-tips">暂时还没有此类房间开放，尽请期待！</div>');switch(h=3==arguments.length?f.rooms.slice(g,g+this.pageSize):f.rooms,h="all"==this.cat?h.slice(6):h,"all"==this.cat&&(i=f.rooms,c=i.slice(0,6),d=renderItem(c),$(".J-rank-anchor").html(d)),e[0].id){case"one_many":j=renderOneToMoreItem(h);break;case"ord":j=renderOrdItem(h);break;default:j=renderItem(h)}e.append(j),"ord"==e[0].id&&bindOrd();var k=e.siblings(".inx-more-btn");k.show(),e.find(".m-load").remove(),$(j).filter(".l-list").length==this.pageNumber?(k.one("click",function(){$("#"+b.cat).append(a),b.renderIndexData($("#"+b.cat),f,b.pageCount)}),k.show()):k.hide(),this.pageCount=this.pageCount+this.pageNumber},$(".tab-item").on("click",function(){b.cat=$(this).data("cat"),"res"!=b.cat&&(b.pageCount=0,$("#"+b.cat).html(""),$("#"+b.cat).append(a),getIndexData(b.cat,function(a){$("#"+b.cat).html(""),b.renderIndexData($("#"+b.cat),a,b.pageCount)},function(a){}))})};$(function(){getPanelData($(".rank-content")),User.handleAfterGetUserInfo=function(){var a=window.User.IMG_URL,b=JSON.parse(window.User.QRCODE_IMG);$(".txt-download img").attr("src",a+"/"+b[0].temp_name)},$(".bannerslider").flexslider({animation:"slide",controlsContainer:$(".custom-controls-container"),customDirectionNav:$(".custom-navigation a")}),searchHandle();var a={btnToTop:$(".J-totop"),btnToBox:$(".J-box")};$(document).scroll(function(){var b=$(document).scrollTop();b>0?a.btnToBox.css("display","block"):0==b&&a.btnToBox.css("display","none")}),a.btnToTop.on("click",function(){$(document).scrollTop(0)}),setInterval(function(){$(".J-tab-menu").find(".tab-item[data-cat=all]").trigger("click"),getIndexData("rank",function(a){renderRankList(a)})},3e5);var b=getLocation("handle"),c=getLocation("rid"),d=getLocation("timecost");window.currentVideo.roomId=c,window.currentVideo.timeCost=d,window.roomTimeCount=new RoomTimeCount,window.roomTicket=new RoomTicket,$(document).on("click",".l-list",function(){if(window.currentVideo.roomId=$(this).data("roomid"),window.currentVideo.isPassword=2==$(this).data("tid"),window.currentVideo.isLimited=1==$(this).data("islimited"),window.currentVideo.isTimeCost=!!$(this).is("[timecost]"),window.currentVideo.roomType=$(this).data("tid"),window.currentVideo.timeCost=$(this).data("timecost"),window.currentVideo.isPassword){var a=new RoomPwd;a.afterPwdSuccess=function(){window.roomTimeCount.showComfirm()}}window.currentVideo.isTimeCost&&window.roomTimeCount.showComfirm()});for(var e=b.split("|"),f=0;f<e.length;f++)"roompwd"==e[f]&&(window.currentVideo.isPassword=!0),"timecost"==e[f]&&(window.currentVideo.isTimeCost=!0);if(c!=User.UID){if(window.currentVideo.isPassword){new RoomPwd}if(window.currentVideo.isTimeCost&&window.roomTimeCount.showComfirm(),"room_one_to_many"==b){var g=JSON.parse(base64.decode(getLocation("data")));window.roomTicket.showBuyTicketDialog({ordTitle:g.username,ordDuration:g.duration,ordPoints:g.points,ordStartTime:g.start_time,ordEndTime:g.end_time,ordRoomId:g.rid,ordOneToManyId:g.id})}"login"==b&&User.showLoginDialog(),"reg"==b&&User.showRegDialog();new VideoList;$(".J-tab-menu").find(".tab-item[data-cat=all]").trigger("click"),getIndexData("rank",function(a){renderRankList(a)})}});