/*! cross - v0.1.2 - 2018-02-05 */Array.prototype.each=function(a){a=a||Function.K;for(var b=[],c=Array.prototype.slice.call(arguments,1),d=0;d<this.length;d++){var e=a.apply(this,[this[d],d].concat(c));null!=e&&b.push(e)}return b},Array.prototype.uniquelize=function(){for(var a=new Array,b=0;b<this.length;b++)a.contains(this[b])||a.push(this[b]);return a},Array.prototype.contains=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return!0;return!1},Array.complement=function(a,b){return Array.minus(Array.union(a,b),Array.intersect(a,b))},Array.intersect=function(a,b){return a.uniquelize().each(function(a){return b.contains(a)?a:null})},Array.minus=function(a,b){return a.uniquelize().each(function(a){return b.contains(a)?null:a})},Array.union=function(a,b){return a.concat(b).uniquelize()},$(function(){var a=function(a,b){$.ajax({url:"/charge/checkCharge",data:{orderId:a},dataType:"json",type:"GET",success:function(a){b&&b(a)},error:function(){}})},b=function(a){$.ajax({url:"/charge/del",type:"POST",data:{lid:a.id},dataType:"json",success:function(b){b.ret?($.tips(b.info),a.target.closest("tr").remove()):$.tips(b.info)},error:function(){$.tips("删除失败")}})};$(document).on("click",".charge-del",function(){var a={};a.target=$(this),a.id=$(this).data("id"),b(a)}),$(document).on("click",".charge-unknown",function(){var b=$(this).data("tradeno"),c=$.dialog({title:"提示",content:"正在获取状态，请稍等"}).show();a(b,function(a){$.tips(a.msg),c.remove()})});var c=$(".charge-label"),d={payAisle:$(".charge-box-hz"),defaultChannel:JSON.parse(decodeURI(c.eq(0).find('input[type="hidden"]').val())),payType:JSON.parse(decodeURI($(".pay-data").val()))};d.payAisle.find("label").hide(),$.each(d.defaultChannel,function(a,b){d.payType.filter(function(b){b.cid==d.defaultChannel[a].cid&&$(".type-"+d.defaultChannel[a].cid).show()})}),c.on("click",function(){var a=JSON.parse(decodeURI($(this).find('input[type="hidden"]').val()));d.payAisle.find("label").hide(),$.each(a,function(b,c){a.filter(function(c){c.cid==a[b].cid&&$(".type-"+a[b].cid).show()})})});for(var e={alipay:"支付宝",wechat:"微信",bankpay:"网银支付",transfer:"人工转账",qqpay:"QQ钱包"},f=$(".charge-box-hz").find('input[name="vipLevel"]'),g=0;g<f.length;g++){var h=$('input[name="vipLevel"]').eq(g),i=h.parent("label"),j=$('input[name="vipLevel"]').eq(g).val();switch(j){case e.alipay:i.addClass("alipay");break;case e.wechat:i.addClass("wechat");break;case e.bankpay:i.addClass("bankpay");break;case e.transfer:i.addClass("transfer");break;case e.qqpay:i.addClass("qqpay")}}$(".charge-box").on("click","label",function(){var a=$(this).find("input[type=radio]");a.prop("checked")&&($(this).siblings().removeClass("active"),$(this).addClass("active"));var b=$("input[type='radio']:checked");$('#chargepay input[name="oid"]').val(b.val()),$("#chargePlat label").click(function(){$('#chargepay input[name="cid"]').val($('#chargePlat input[type="radio"]:checked').parent().attr("data-id")),"人工转账"==$(this).attr("type")?$(".input-transfer").animate({opacity:1}):$(".input-transfer").animate({opacity:0}).find('input[type="text"]').val("")}),$(".input-transfer").animate({opacity:0}).find('input[type="text"]').val("")});var k=$("input[type='radio']:checked");if($('#chargepay input[name="oid"]').val(k.val()),$("#chargePlat label").click(function(){$('#chargepay input[name="cid"]').val($('#chargePlat input[type="radio"]:checked').parent().attr("data-id")),"人工转账"==$(this).attr("type")?$(".input-transfer").animate({opacity:1}):$(".input-transfer").animate({opacity:0}).find('input[type="text"]').val("")}),$(".input-transfer").find('input[type="text"]').blur(function(){$('input[name="remark"]').val($(this).val())}),getLocation("msg")&&$.tips(getLocation("msg")),getLocation("radioprice")){var l=getLocation("radioprice"),m=$("[type=radio][value="+l+"]"),n=$("#chargeIpt");m.length?m.prop("checked",!0):($("#chargeIptRadio").prop("checked",!0),n.val(l))}$("#chargeIptBox").on("click",function(){$("#chargeIpt").focus(),$(".charge-box").find("label").removeClass("active")}),$("#chargeIpt").on("click",function(){$("#chargeIptRadio").prop("checked",!0)}).on("keyup",function(){var a=0,b=$(this).val(),c=$(this).parent("span").siblings(".charge-diamond"),d=$(".charge-tips");$.isNumeric(b)&&parseInt(b,10)>1e5?(a=parseInt(b,10),c.text(10*a+"钻石"),d.text("最多充值100000元")):$.isNumeric(b)&&parseInt(b,10)<10?d.text("最少充值10元"):$.isNumeric(b)&&/^[1-9]\d*$/.test(b)&&parseInt(b,10)>=10&&parseInt(b,10)<=1e5?(a=parseInt(b,10),c.text(10*a+"钻石"),d.text("")):(c.text(""),d.text("不可输入0，小数，负数，字母和特殊符号"))})});